{"ast":null,"code":"import { defineComponent } from 'vue';\nimport { addClass, removeClass } from '../../../utils/dom.mjs';\nvar script = defineComponent({\n  name: \"ElCollapseTransition\",\n  setup() {\n    return {\n      on: {\n        beforeEnter(el) {\n          addClass(el, \"collapse-transition\");\n          if (!el.dataset) el.dataset = {};\n          el.dataset.oldPaddingTop = el.style.paddingTop;\n          el.dataset.oldPaddingBottom = el.style.paddingBottom;\n          el.style.height = \"0\";\n          el.style.paddingTop = 0;\n          el.style.paddingBottom = 0;\n        },\n        enter(el) {\n          el.dataset.oldOverflow = el.style.overflow;\n          if (el.scrollHeight !== 0) {\n            el.style.height = `${el.scrollHeight}px`;\n            el.style.paddingTop = el.dataset.oldPaddingTop;\n            el.style.paddingBottom = el.dataset.oldPaddingBottom;\n          } else {\n            el.style.height = \"\";\n            el.style.paddingTop = el.dataset.oldPaddingTop;\n            el.style.paddingBottom = el.dataset.oldPaddingBottom;\n          }\n          el.style.overflow = \"hidden\";\n        },\n        afterEnter(el) {\n          removeClass(el, \"collapse-transition\");\n          el.style.height = \"\";\n          el.style.overflow = el.dataset.oldOverflow;\n        },\n        beforeLeave(el) {\n          if (!el.dataset) el.dataset = {};\n          el.dataset.oldPaddingTop = el.style.paddingTop;\n          el.dataset.oldPaddingBottom = el.style.paddingBottom;\n          el.dataset.oldOverflow = el.style.overflow;\n          el.style.height = `${el.scrollHeight}px`;\n          el.style.overflow = \"hidden\";\n        },\n        leave(el) {\n          if (el.scrollHeight !== 0) {\n            addClass(el, \"collapse-transition\");\n            el.style.transitionProperty = \"height\";\n            el.style.height = 0;\n            el.style.paddingTop = 0;\n            el.style.paddingBottom = 0;\n          }\n        },\n        afterLeave(el) {\n          removeClass(el, \"collapse-transition\");\n          el.style.height = \"\";\n          el.style.overflow = el.dataset.oldOverflow;\n          el.style.paddingTop = el.dataset.oldPaddingTop;\n          el.style.paddingBottom = el.dataset.oldPaddingBottom;\n        }\n      }\n    };\n  }\n});\nexport { script as default };","map":{"version":3,"names":["script","defineComponent","name","setup","on","beforeEnter","el","addClass","dataset","oldPaddingTop","style","paddingTop","oldPaddingBottom","paddingBottom","height","enter","oldOverflow","overflow","scrollHeight","afterEnter","removeClass","beforeLeave","leave","transitionProperty","afterLeave"],"sources":["../../../../../../packages/components/collapse-transition/src/collapse-transition.vue"],"sourcesContent":["<template>\n  <transition v-on=\"on\">\n    <slot></slot>\n  </transition>\n</template>\n<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nimport { addClass, removeClass } from '@element-plus/utils/dom'\n\nexport default defineComponent({\n  name: 'ElCollapseTransition',\n  setup() {\n    return {\n      on: {\n        beforeEnter(el) {\n          addClass(el, 'collapse-transition')\n          if (!el.dataset) el.dataset = {}\n\n          el.dataset.oldPaddingTop = el.style.paddingTop\n          el.dataset.oldPaddingBottom = el.style.paddingBottom\n\n          el.style.height = '0'\n          el.style.paddingTop = 0\n          el.style.paddingBottom = 0\n        },\n\n        enter(el) {\n          el.dataset.oldOverflow = el.style.overflow\n          if (el.scrollHeight !== 0) {\n            el.style.height = `${el.scrollHeight}px`\n            el.style.paddingTop = el.dataset.oldPaddingTop\n            el.style.paddingBottom = el.dataset.oldPaddingBottom\n          } else {\n            el.style.height = ''\n            el.style.paddingTop = el.dataset.oldPaddingTop\n            el.style.paddingBottom = el.dataset.oldPaddingBottom\n          }\n\n          el.style.overflow = 'hidden'\n        },\n\n        afterEnter(el) {\n          // for safari: remove class then reset height is necessary\n          removeClass(el, 'collapse-transition')\n          el.style.height = ''\n          el.style.overflow = el.dataset.oldOverflow\n        },\n\n        beforeLeave(el) {\n          if (!el.dataset) el.dataset = {}\n          el.dataset.oldPaddingTop = el.style.paddingTop\n          el.dataset.oldPaddingBottom = el.style.paddingBottom\n          el.dataset.oldOverflow = el.style.overflow\n\n          el.style.height = `${el.scrollHeight}px`\n          el.style.overflow = 'hidden'\n        },\n\n        leave(el) {\n          if (el.scrollHeight !== 0) {\n            // for safari: add class after set height, or it will jump to zero height suddenly, weired\n            addClass(el, 'collapse-transition')\n            // fix #968 collapse animation failure.\n            // in vue3.0.4, transitionProperty is set 'none' to avoid 'v-leave-from' issue\n            el.style.transitionProperty = 'height'\n            el.style.height = 0\n            el.style.paddingTop = 0\n            el.style.paddingBottom = 0\n          }\n        },\n\n        afterLeave(el) {\n          removeClass(el, 'collapse-transition')\n          el.style.height = ''\n          el.style.overflow = el.dataset.oldOverflow\n          el.style.paddingTop = el.dataset.oldPaddingTop\n          el.style.paddingBottom = el.dataset.oldPaddingBottom\n        },\n      },\n    }\n  },\n})\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}