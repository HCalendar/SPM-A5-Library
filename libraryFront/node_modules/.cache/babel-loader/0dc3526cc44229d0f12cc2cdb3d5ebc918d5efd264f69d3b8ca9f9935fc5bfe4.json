{"ast":null,"code":"import { defineComponent, ref, computed, onMounted } from 'vue';\nimport { useTimeoutFn, useEventListener } from '@vueuse/core';\nimport { EVENT_CODE } from '../../../utils/aria.mjs';\nimport { ElIcon } from '../../icon/index.mjs';\nimport { TypeComponents, TypeComponentsMap } from '../../../utils/icon.mjs';\nimport { notificationProps, notificationEmits } from './notification.mjs';\nvar script = defineComponent({\n  name: \"ElNotification\",\n  components: {\n    ElIcon,\n    ...TypeComponents\n  },\n  props: notificationProps,\n  emits: notificationEmits,\n  setup(props) {\n    const visible = ref(false);\n    let timer = void 0;\n    const typeClass = computed(() => {\n      const type = props.type;\n      return type && TypeComponentsMap[props.type] ? `el-notification--${type}` : \"\";\n    });\n    const iconComponent = computed(() => {\n      return TypeComponentsMap[props.type] || props.icon || \"\";\n    });\n    const horizontalClass = computed(() => props.position.endsWith(\"right\") ? \"right\" : \"left\");\n    const verticalProperty = computed(() => props.position.startsWith(\"top\") ? \"top\" : \"bottom\");\n    const positionStyle = computed(() => {\n      return {\n        [verticalProperty.value]: `${props.offset}px`,\n        zIndex: props.zIndex\n      };\n    });\n    function startTimer() {\n      if (props.duration > 0) {\n        ;\n        ({\n          stop: timer\n        } = useTimeoutFn(() => {\n          if (visible.value) close();\n        }, props.duration));\n      }\n    }\n    function clearTimer() {\n      timer == null ? void 0 : timer();\n    }\n    function close() {\n      visible.value = false;\n    }\n    function onKeydown({\n      code\n    }) {\n      if (code === EVENT_CODE.delete || code === EVENT_CODE.backspace) {\n        clearTimer();\n      } else if (code === EVENT_CODE.esc) {\n        if (visible.value) {\n          close();\n        }\n      } else {\n        startTimer();\n      }\n    }\n    onMounted(() => {\n      startTimer();\n      visible.value = true;\n    });\n    useEventListener(document, \"keydown\", onKeydown);\n    return {\n      horizontalClass,\n      typeClass,\n      iconComponent,\n      positionStyle,\n      visible,\n      close,\n      clearTimer,\n      startTimer\n    };\n  }\n});\nexport { script as default };","map":{"version":3,"names":["script","defineComponent","name","components","ElIcon","TypeComponents","props","notificationProps","emits","notificationEmits","setup","visible","ref","timer","typeClass","computed","type","TypeComponentsMap","iconComponent","icon","horizontalClass","position","endsWith","verticalProperty","startsWith","positionStyle","value","offset","zIndex","startTimer","duration","stop","useTimeoutFn","close","clearTimer","onKeydown","code","EVENT_CODE","delete","backspace","esc","onMounted","useEventListener","document"],"sources":["../../../../../../packages/components/notification/src/notification.vue"],"sourcesContent":["<template>\n  <transition\n    name=\"el-notification-fade\"\n    @before-leave=\"onClose\"\n    @after-leave=\"$emit('destroy')\"\n  >\n    <div\n      v-show=\"visible\"\n      :id=\"id\"\n      :class=\"['el-notification', customClass, horizontalClass]\"\n      :style=\"positionStyle\"\n      role=\"alert\"\n      @mouseenter=\"clearTimer\"\n      @mouseleave=\"startTimer\"\n      @click=\"onClick\"\n    >\n      <el-icon\n        v-if=\"iconComponent\"\n        class=\"el-notification__icon\"\n        :class=\"typeClass\"\n      >\n        <component :is=\"iconComponent\" />\n      </el-icon>\n      <div class=\"el-notification__group\">\n        <h2 class=\"el-notification__title\" v-text=\"title\"></h2>\n        <div\n          v-show=\"message\"\n          class=\"el-notification__content\"\n          :style=\"!!title ? undefined : { margin: 0 }\"\n        >\n          <slot>\n            <p v-if=\"!dangerouslyUseHTMLString\">{{ message }}</p>\n            <!-- Caution here, message could've been compromized, nerver use user's input as message -->\n            <!-- eslint-disable-next-line -->\n            <p v-else v-html=\"message\"></p>\n          </slot>\n        </div>\n        <el-icon\n          v-if=\"showClose\"\n          class=\"el-notification__closeBtn\"\n          @click.stop=\"close\"\n        >\n          <close />\n        </el-icon>\n      </div>\n    </div>\n  </transition>\n</template>\n<script lang=\"ts\">\nimport { defineComponent, computed, ref, onMounted } from 'vue'\nimport { useEventListener, useTimeoutFn } from '@vueuse/core'\nimport { EVENT_CODE } from '@element-plus/utils/aria'\nimport { ElIcon } from '@element-plus/components/icon'\nimport { TypeComponents, TypeComponentsMap } from '@element-plus/utils/icon'\nimport { notificationProps, notificationEmits } from './notification'\n\nimport type { CSSProperties } from 'vue'\n\nexport default defineComponent({\n  name: 'ElNotification',\n\n  components: {\n    ElIcon,\n    ...TypeComponents,\n  },\n\n  props: notificationProps,\n  emits: notificationEmits,\n\n  setup(props) {\n    const visible = ref(false)\n    let timer: (() => void) | undefined = undefined\n\n    const typeClass = computed(() => {\n      const type = props.type\n      return type && TypeComponentsMap[props.type]\n        ? `el-notification--${type}`\n        : ''\n    })\n\n    const iconComponent = computed(() => {\n      return TypeComponentsMap[props.type] || props.icon || ''\n    })\n\n    const horizontalClass = computed(() =>\n      props.position.endsWith('right') ? 'right' : 'left'\n    )\n\n    const verticalProperty = computed(() =>\n      props.position.startsWith('top') ? 'top' : 'bottom'\n    )\n\n    const positionStyle = computed<CSSProperties>(() => {\n      return {\n        [verticalProperty.value]: `${props.offset}px`,\n        zIndex: props.zIndex,\n      }\n    })\n\n    function startTimer() {\n      if (props.duration > 0) {\n        ;({ stop: timer } = useTimeoutFn(() => {\n          if (visible.value) close()\n        }, props.duration))\n      }\n    }\n\n    function clearTimer() {\n      timer?.()\n    }\n\n    function close() {\n      visible.value = false\n    }\n\n    function onKeydown({ code }: KeyboardEvent) {\n      if (code === EVENT_CODE.delete || code === EVENT_CODE.backspace) {\n        clearTimer() // press delete/backspace clear timer\n      } else if (code === EVENT_CODE.esc) {\n        // press esc to close the notification\n        if (visible.value) {\n          close()\n        }\n      } else {\n        startTimer() // resume timer\n      }\n    }\n\n    // lifecycle\n    onMounted(() => {\n      startTimer()\n      visible.value = true\n    })\n\n    useEventListener(document, 'keydown', onKeydown)\n\n    return {\n      horizontalClass,\n      typeClass,\n      iconComponent,\n      positionStyle,\n      visible,\n\n      close,\n      clearTimer,\n      startTimer,\n    }\n  },\n})\n</script>\n"],"mappings":";;;;;;AA0DA,IAAAA,MAAA,GAAeC,eAAA,CAAgB;EAC7BC,IAAA,EAAM;EAENC,UAAA,EAAY;IACVC,MAAA;IAAA,GACGC;EAAA;EAGLC,KAAA,EAAOC,iBAAA;EACPC,KAAA,EAAOC,iBAAA;EAEPC,MAAMJ,KAAA,EAAO;IACX,MAAMK,OAAA,GAAUC,GAAA,CAAI;IACpB,IAAIC,KAAA,GAAkC;IAEtC,MAAMC,SAAA,GAAYC,QAAA,CAAS,MAAM;MAC/B,MAAMC,IAAA,GAAOV,KAAA,CAAMU,IAAA;MACnB,OAAOA,IAAA,IAAQC,iBAAA,CAAkBX,KAAA,CAAMU,IAAA,IACnC,oBAAoBA,IAAA,KACpB;IAAA;IAGN,MAAME,aAAA,GAAgBH,QAAA,CAAS,MAAM;MACnC,OAAOE,iBAAA,CAAkBX,KAAA,CAAMU,IAAA,KAASV,KAAA,CAAMa,IAAA,IAAQ;IAAA;IAGxD,MAAMC,eAAA,GAAkBL,QAAA,CAAS,MAC/BT,KAAA,CAAMe,QAAA,CAASC,QAAA,CAAS,WAAW,UAAU;IAG/C,MAAMC,gBAAA,GAAmBR,QAAA,CAAS,MAChCT,KAAA,CAAMe,QAAA,CAASG,UAAA,CAAW,SAAS,QAAQ;IAG7C,MAAMC,aAAA,GAAgBV,QAAA,CAAwB,MAAM;MAClD,OAAO;QAAA,CACJQ,gBAAA,CAAiBG,KAAA,GAAQ,GAAGpB,KAAA,CAAMqB,MAAA;QACnCC,MAAA,EAAQtB,KAAA,CAAMsB;MAAA;IAAA;IAIlB,SAAAC,WAAA,EAAsB;MACpB,IAAIvB,KAAA,CAAMwB,QAAA,GAAW,GAAG;QACtB;QAAE;UAAEC,IAAA,EAAMlB;QAAA,IAAUmB,YAAA,CAAa,MAAM;UACrC,IAAIrB,OAAA,CAAQe,KAAA,EAAOO,KAAA;QAAA,GAClB3B,KAAA,CAAMwB,QAAA;MAAA;IAAA;IAIb,SAAAI,WAAA,EAAsB;MACpBrB,KAAA,oBAAAA,KAAA;IAAA;IAGF,SAAAoB,MAAA,EAAiB;MACftB,OAAA,CAAQe,KAAA,GAAQ;IAAA;IAGlB,SAAAS,UAAmB;MAAEC;IAAA,GAAuB;MAC1C,IAAIA,IAAA,KAASC,UAAA,CAAWC,MAAA,IAAUF,IAAA,KAASC,UAAA,CAAWE,SAAA,EAAW;QAC/DL,UAAA;MAAA,WACSE,IAAA,KAASC,UAAA,CAAWG,GAAA,EAAK;QAElC,IAAI7B,OAAA,CAAQe,KAAA,EAAO;UACjBO,KAAA;QAAA;MAAA,OAEG;QACLJ,UAAA;MAAA;IAAA;IAKJY,SAAA,CAAU,MAAM;MACdZ,UAAA;MACAlB,OAAA,CAAQe,KAAA,GAAQ;IAAA;IAGlBgB,gBAAA,CAAiBC,QAAA,EAAU,WAAWR,SAAA;IAEtC,OAAO;MACLf,eAAA;MACAN,SAAA;MACAI,aAAA;MACAO,aAAA;MACAd,OAAA;MAEAsB,KAAA;MACAC,UAAA;MACAL;IAAA;EAAA;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}