{"ast":null,"code":"import { defineComponent, getCurrentInstance, computed } from 'vue';\nimport debounce from 'lodash/debounce';\nimport '../../../directives/index.mjs';\nimport '../../../hooks/index.mjs';\nimport { createStore } from './store/helper.mjs';\nimport TableLayout from './table-layout.mjs';\nimport TableHeader from './table-header/index.mjs';\nimport TableBody from './table-body/index.mjs';\nimport TableFooter from './table-footer/index.mjs';\nimport useUtils from './table/utils-helper.mjs';\nimport useStyle from './table/style-helper.mjs';\nimport defaultProps from './table/defaults.mjs';\nimport Mousewheel from '../../../directives/mousewheel/index.mjs';\nimport { useLocale } from '../../../hooks/use-locale/index.mjs';\nlet tableIdSeed = 1;\nvar script = defineComponent({\n  name: \"ElTable\",\n  directives: {\n    Mousewheel\n  },\n  components: {\n    TableHeader,\n    TableBody,\n    TableFooter\n  },\n  props: defaultProps,\n  emits: [\"select\", \"select-all\", \"selection-change\", \"cell-mouse-enter\", \"cell-mouse-leave\", \"cell-contextmenu\", \"cell-click\", \"cell-dblclick\", \"row-click\", \"row-contextmenu\", \"row-dblclick\", \"header-click\", \"header-contextmenu\", \"sort-change\", \"filter-change\", \"current-change\", \"header-dragend\", \"expand-change\"],\n  setup(props) {\n    const {\n      t\n    } = useLocale();\n    const table = getCurrentInstance();\n    const store = createStore(table, props);\n    table.store = store;\n    const layout = new TableLayout({\n      store: table.store,\n      table,\n      fit: props.fit,\n      showHeader: props.showHeader\n    });\n    table.layout = layout;\n    const isEmpty = computed(() => (store.states.data.value || []).length === 0);\n    const {\n      setCurrentRow,\n      toggleRowSelection,\n      clearSelection,\n      clearFilter,\n      toggleAllSelection,\n      toggleRowExpansion,\n      clearSort,\n      sort\n    } = useUtils(store);\n    const {\n      isHidden,\n      renderExpanded,\n      setDragVisible,\n      isGroup,\n      handleMouseLeave,\n      handleHeaderFooterMousewheel,\n      tableSize,\n      bodyHeight,\n      emptyBlockStyle,\n      handleFixedMousewheel,\n      fixedHeight,\n      fixedBodyHeight,\n      resizeProxyVisible,\n      bodyWidth,\n      resizeState,\n      doLayout\n    } = useStyle(props, layout, store, table);\n    const debouncedUpdateLayout = debounce(doLayout, 50);\n    const tableId = `el-table_${tableIdSeed++}`;\n    table.tableId = tableId;\n    table.state = {\n      isGroup,\n      resizeState,\n      doLayout,\n      debouncedUpdateLayout\n    };\n    return {\n      layout,\n      store,\n      handleHeaderFooterMousewheel,\n      handleMouseLeave,\n      tableId,\n      tableSize,\n      isHidden,\n      isEmpty,\n      renderExpanded,\n      resizeProxyVisible,\n      resizeState,\n      isGroup,\n      bodyWidth,\n      bodyHeight,\n      emptyBlockStyle,\n      debouncedUpdateLayout,\n      handleFixedMousewheel,\n      fixedHeight,\n      fixedBodyHeight,\n      setCurrentRow,\n      toggleRowSelection,\n      clearSelection,\n      clearFilter,\n      toggleAllSelection,\n      toggleRowExpansion,\n      clearSort,\n      doLayout,\n      sort,\n      t,\n      setDragVisible,\n      context: table\n    };\n  }\n});\nexport { script as default };","map":{"version":3,"names":["tableIdSeed","script","defineComponent","name","directives","Mousewheel","components","TableHeader","TableBody","TableFooter","props","defaultProps","emits","setup","t","useLocale","table","getCurrentInstance","store","createStore","layout","TableLayout","fit","showHeader","isEmpty","computed","states","data","value","length","setCurrentRow","toggleRowSelection","clearSelection","clearFilter","toggleAllSelection","toggleRowExpansion","clearSort","sort","useUtils","isHidden","renderExpanded","setDragVisible","isGroup","handleMouseLeave","handleHeaderFooterMousewheel","tableSize","bodyHeight","emptyBlockStyle","handleFixedMousewheel","fixedHeight","fixedBodyHeight","resizeProxyVisible","bodyWidth","resizeState","doLayout","useStyle","debouncedUpdateLayout","debounce","tableId","state","context"],"sources":["../../../../../../packages/components/table/src/table.vue"],"sourcesContent":["<template>\n  <div\n    :class=\"[\n      {\n        'el-table--fit': fit,\n        'el-table--striped': stripe,\n        'el-table--border': border || isGroup,\n        'el-table--hidden': isHidden,\n        'el-table--group': isGroup,\n        'el-table--fluid-height': maxHeight,\n        'el-table--scrollable-x': layout.scrollX.value,\n        'el-table--scrollable-y': layout.scrollY.value,\n        'el-table--enable-row-hover': !store.states.isComplex.value,\n        'el-table--enable-row-transition':\n          (store.states.data.value || []).length !== 0 &&\n          (store.states.data.value || []).length < 100,\n      },\n      tableSize ? `el-table--${tableSize}` : '',\n      className,\n      'el-table',\n    ]\"\n    :style=\"style\"\n    @mouseleave=\"handleMouseLeave()\"\n  >\n    <div ref=\"hiddenColumns\" class=\"hidden-columns\">\n      <slot></slot>\n    </div>\n    <div\n      v-if=\"showHeader\"\n      ref=\"headerWrapper\"\n      v-mousewheel=\"handleHeaderFooterMousewheel\"\n      class=\"el-table__header-wrapper\"\n    >\n      <table-header\n        ref=\"tableHeader\"\n        :border=\"border\"\n        :default-sort=\"defaultSort\"\n        :store=\"store\"\n        :style=\"{\n          width: layout.bodyWidth.value ? layout.bodyWidth.value + 'px' : '',\n        }\"\n        @set-drag-visible=\"setDragVisible\"\n      />\n    </div>\n    <div ref=\"bodyWrapper\" :style=\"[bodyHeight]\" class=\"el-table__body-wrapper\">\n      <table-body\n        :context=\"context\"\n        :highlight=\"highlightCurrentRow\"\n        :row-class-name=\"rowClassName\"\n        :tooltip-effect=\"tooltipEffect\"\n        :row-style=\"rowStyle\"\n        :store=\"store\"\n        :stripe=\"stripe\"\n        :style=\"{\n          width: bodyWidth,\n        }\"\n      />\n      <div\n        v-if=\"isEmpty\"\n        ref=\"emptyBlock\"\n        :style=\"emptyBlockStyle\"\n        class=\"el-table__empty-block\"\n      >\n        <span class=\"el-table__empty-text\">\n          <slot name=\"empty\">{{ emptyText || t('el.table.emptyText') }}</slot>\n        </span>\n      </div>\n      <div\n        v-if=\"$slots.append\"\n        ref=\"appendWrapper\"\n        class=\"el-table__append-wrapper\"\n      >\n        <slot name=\"append\"></slot>\n      </div>\n    </div>\n    <div\n      v-if=\"showSummary\"\n      v-show=\"!isEmpty\"\n      ref=\"footerWrapper\"\n      v-mousewheel=\"handleHeaderFooterMousewheel\"\n      class=\"el-table__footer-wrapper\"\n    >\n      <table-footer\n        :border=\"border\"\n        :default-sort=\"defaultSort\"\n        :store=\"store\"\n        :style=\"{\n          width: layout.bodyWidth.value ? layout.bodyWidth.value + 'px' : '',\n        }\"\n        :sum-text=\"sumText || t('el.table.sumText')\"\n        :summary-method=\"summaryMethod\"\n      />\n    </div>\n    <div\n      v-if=\"store.states.fixedColumns.value.length > 0\"\n      ref=\"fixedWrapper\"\n      v-mousewheel=\"handleFixedMousewheel\"\n      :style=\"[\n        {\n          width: layout.fixedWidth.value ? layout.fixedWidth.value + 'px' : '',\n        },\n        fixedHeight,\n      ]\"\n      class=\"el-table__fixed\"\n    >\n      <div\n        v-if=\"showHeader\"\n        ref=\"fixedHeaderWrapper\"\n        class=\"el-table__fixed-header-wrapper\"\n      >\n        <table-header\n          ref=\"fixedTableHeader\"\n          :border=\"border\"\n          :store=\"store\"\n          :style=\"{\n            width: bodyWidth,\n          }\"\n          fixed=\"left\"\n          @set-drag-visible=\"setDragVisible\"\n        />\n      </div>\n      <div\n        ref=\"fixedBodyWrapper\"\n        :style=\"[\n          {\n            top: layout.headerHeight.value + 'px',\n          },\n          fixedBodyHeight,\n        ]\"\n        class=\"el-table__fixed-body-wrapper\"\n      >\n        <table-body\n          :highlight=\"highlightCurrentRow\"\n          :row-class-name=\"rowClassName\"\n          :tooltip-effect=\"tooltipEffect\"\n          :row-style=\"rowStyle\"\n          :store=\"store\"\n          :stripe=\"stripe\"\n          :style=\"{\n            width: bodyWidth,\n          }\"\n          fixed=\"left\"\n        />\n        <div\n          v-if=\"$slots.append\"\n          :style=\"{ height: layout.appendHeight.value + 'px' }\"\n          class=\"el-table__append-gutter\"\n        ></div>\n      </div>\n      <div\n        v-if=\"showSummary\"\n        v-show=\"!isEmpty\"\n        ref=\"fixedFooterWrapper\"\n        class=\"el-table__fixed-footer-wrapper\"\n      >\n        <table-footer\n          :border=\"border\"\n          :store=\"store\"\n          :style=\"{\n            width: bodyWidth,\n          }\"\n          :sum-text=\"sumText || t('el.table.sumText')\"\n          :summary-method=\"summaryMethod\"\n          fixed=\"left\"\n        />\n      </div>\n    </div>\n    <div\n      v-if=\"store.states.rightFixedColumns.value.length > 0\"\n      ref=\"rightFixedWrapper\"\n      v-mousewheel=\"handleFixedMousewheel\"\n      :style=\"[\n        {\n          width: layout.rightFixedWidth.value\n            ? layout.rightFixedWidth.value + 'px'\n            : '',\n          right: layout.scrollY.value\n            ? (border ? layout.gutterWidth : layout.gutterWidth || 0) + 'px'\n            : '',\n        },\n        fixedHeight,\n      ]\"\n      class=\"el-table__fixed-right\"\n    >\n      <div\n        v-if=\"showHeader\"\n        ref=\"rightFixedHeaderWrapper\"\n        class=\"el-table__fixed-header-wrapper\"\n      >\n        <table-header\n          ref=\"rightFixedTableHeader\"\n          :border=\"border\"\n          :store=\"store\"\n          :style=\"{\n            width: bodyWidth,\n          }\"\n          fixed=\"right\"\n          @set-drag-visible=\"setDragVisible\"\n        />\n      </div>\n      <div\n        ref=\"rightFixedBodyWrapper\"\n        :style=\"[{ top: layout.headerHeight.value + 'px' }, fixedBodyHeight]\"\n        class=\"el-table__fixed-body-wrapper\"\n      >\n        <table-body\n          :highlight=\"highlightCurrentRow\"\n          :row-class-name=\"rowClassName\"\n          :tooltip-effect=\"tooltipEffect\"\n          :row-style=\"rowStyle\"\n          :store=\"store\"\n          :stripe=\"stripe\"\n          :style=\"{\n            width: bodyWidth,\n          }\"\n          fixed=\"right\"\n        />\n        <div\n          v-if=\"$slots.append\"\n          :style=\"{ height: layout.appendHeight.value + 'px' }\"\n          class=\"el-table__append-gutter\"\n        ></div>\n      </div>\n      <div\n        v-if=\"showSummary\"\n        v-show=\"!isEmpty\"\n        ref=\"rightFixedFooterWrapper\"\n        class=\"el-table__fixed-footer-wrapper\"\n      >\n        <table-footer\n          :border=\"border\"\n          :store=\"store\"\n          :style=\"{\n            width: bodyWidth,\n          }\"\n          :sum-text=\"sumText || t('el.table.sumText')\"\n          :summary-method=\"summaryMethod\"\n          fixed=\"right\"\n        />\n      </div>\n    </div>\n    <div\n      v-if=\"store.states.rightFixedColumns.value.length > 0\"\n      ref=\"rightFixedPatch\"\n      :style=\"{\n        width: layout.scrollY.value ? layout.gutterWidth + 'px' : '0',\n        height: layout.headerHeight.value + 'px',\n      }\"\n      class=\"el-table__fixed-right-patch\"\n    ></div>\n    <div\n      v-show=\"resizeProxyVisible\"\n      ref=\"resizeProxy\"\n      class=\"el-table__column-resize-proxy\"\n    ></div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, getCurrentInstance, computed } from 'vue'\nimport debounce from 'lodash/debounce'\nimport { Mousewheel } from '@element-plus/directives'\nimport { useLocale } from '@element-plus/hooks'\nimport { createStore } from './store/helper'\nimport TableLayout from './table-layout'\nimport TableHeader from './table-header'\nimport TableBody from './table-body'\nimport TableFooter from './table-footer'\nimport useUtils from './table/utils-helper'\nimport useStyle from './table/style-helper'\nimport defaultProps from './table/defaults'\n\nimport type { Table } from './table/defaults'\n\nlet tableIdSeed = 1\nexport default defineComponent({\n  name: 'ElTable',\n  directives: {\n    Mousewheel,\n  },\n  components: {\n    TableHeader,\n    TableBody,\n    TableFooter,\n  },\n  props: defaultProps,\n  emits: [\n    'select',\n    'select-all',\n    'selection-change',\n    'cell-mouse-enter',\n    'cell-mouse-leave',\n    'cell-contextmenu',\n    'cell-click',\n    'cell-dblclick',\n    'row-click',\n    'row-contextmenu',\n    'row-dblclick',\n    'header-click',\n    'header-contextmenu',\n    'sort-change',\n    'filter-change',\n    'current-change',\n    'header-dragend',\n    'expand-change',\n  ],\n  setup(props) {\n    type Row = typeof props.data[number]\n    const { t } = useLocale()\n    const table = getCurrentInstance() as Table<Row>\n    const store = createStore<Row>(table, props)\n    table.store = store\n    const layout = new TableLayout<Row>({\n      store: table.store,\n      table,\n      fit: props.fit,\n      showHeader: props.showHeader,\n    })\n    table.layout = layout\n\n    const isEmpty = computed(() => (store.states.data.value || []).length === 0)\n\n    /**\n     * open functions\n     */\n    const {\n      setCurrentRow,\n      toggleRowSelection,\n      clearSelection,\n      clearFilter,\n      toggleAllSelection,\n      toggleRowExpansion,\n      clearSort,\n      sort,\n    } = useUtils<Row>(store)\n    const {\n      isHidden,\n      renderExpanded,\n      setDragVisible,\n      isGroup,\n      handleMouseLeave,\n      handleHeaderFooterMousewheel,\n      tableSize,\n      bodyHeight,\n      emptyBlockStyle,\n      handleFixedMousewheel,\n      fixedHeight,\n      fixedBodyHeight,\n      resizeProxyVisible,\n      bodyWidth,\n      resizeState,\n      doLayout,\n    } = useStyle<Row>(props, layout, store, table)\n\n    const debouncedUpdateLayout = debounce(doLayout, 50)\n\n    const tableId = `el-table_${tableIdSeed++}`\n    table.tableId = tableId\n    table.state = {\n      isGroup,\n      resizeState,\n      doLayout,\n      debouncedUpdateLayout,\n    }\n    return {\n      layout,\n      store,\n      handleHeaderFooterMousewheel,\n      handleMouseLeave,\n      tableId,\n      tableSize,\n      isHidden,\n      isEmpty,\n      renderExpanded,\n      resizeProxyVisible,\n      resizeState,\n      isGroup,\n      bodyWidth,\n      bodyHeight,\n      emptyBlockStyle,\n      debouncedUpdateLayout,\n      handleFixedMousewheel,\n      fixedHeight,\n      fixedBodyHeight,\n      setCurrentRow,\n      toggleRowSelection,\n      clearSelection,\n      clearFilter,\n      toggleAllSelection,\n      toggleRowExpansion,\n      clearSort,\n      doLayout,\n      sort,\n      t,\n      setDragVisible,\n      context: table,\n    }\n  },\n})\n</script>\n"],"mappings":";;;;;;;;;;;;;;AAkRA,IAAIA,WAAA,GAAc;AAClB,IAAAC,MAAA,GAAeC,eAAA,CAAgB;EAC7BC,IAAA,EAAM;EACNC,UAAA,EAAY;IACVC;EAAA;EAEFC,UAAA,EAAY;IACVC,WAAA;IACAC,SAAA;IACAC;EAAA;EAEFC,KAAA,EAAOC,YAAA;EACPC,KAAA,EAAO,CACL,UACA,cACA,oBACA,oBACA,oBACA,oBACA,cACA,iBACA,aACA,mBACA,gBACA,gBACA,sBACA,eACA,iBACA,kBACA,kBACA;EAEFC,MAAMH,KAAA,EAAO;IAEX,MAAM;MAAEI;IAAA,IAAMC,SAAA;IACd,MAAMC,KAAA,GAAQC,kBAAA;IACd,MAAMC,KAAA,GAAQC,WAAA,CAAiBH,KAAA,EAAON,KAAA;IACtCM,KAAA,CAAME,KAAA,GAAQA,KAAA;IACd,MAAME,MAAA,GAAS,IAAIC,WAAA,CAAiB;MAClCH,KAAA,EAAOF,KAAA,CAAME,KAAA;MACbF,KAAA;MACAM,GAAA,EAAKZ,KAAA,CAAMY,GAAA;MACXC,UAAA,EAAYb,KAAA,CAAMa;IAAA;IAEpBP,KAAA,CAAMI,MAAA,GAASA,MAAA;IAEf,MAAMI,OAAA,GAAUC,QAAA,CAAS,MAAO,CAAAP,KAAA,CAAMQ,MAAA,CAAOC,IAAA,CAAKC,KAAA,IAAS,IAAIC,MAAA,KAAW;IAK1E,MAAM;MACJC,aAAA;MACAC,kBAAA;MACAC,cAAA;MACAC,WAAA;MACAC,kBAAA;MACAC,kBAAA;MACAC,SAAA;MACAC;IAAA,IACEC,QAAA,CAAcpB,KAAA;IAClB,MAAM;MACJqB,QAAA;MACAC,cAAA;MACAC,cAAA;MACAC,OAAA;MACAC,gBAAA;MACAC,4BAAA;MACAC,SAAA;MACAC,UAAA;MACAC,eAAA;MACAC,qBAAA;MACAC,WAAA;MACAC,eAAA;MACAC,kBAAA;MACAC,SAAA;MACAC,WAAA;MACAC;IAAA,IACEC,QAAA,CAAc7C,KAAA,EAAOU,MAAA,EAAQF,KAAA,EAAOF,KAAA;IAExC,MAAMwC,qBAAA,GAAwBC,QAAA,CAASH,QAAA,EAAU;IAEjD,MAAMI,OAAA,GAAU,YAAY1D,WAAA;IAC5BgB,KAAA,CAAM0C,OAAA,GAAUA,OAAA;IAChB1C,KAAA,CAAM2C,KAAA,GAAQ;MACZjB,OAAA;MACAW,WAAA;MACAC,QAAA;MACAE;IAAA;IAEF,OAAO;MACLpC,MAAA;MACAF,KAAA;MACA0B,4BAAA;MACAD,gBAAA;MACAe,OAAA;MACAb,SAAA;MACAN,QAAA;MACAf,OAAA;MACAgB,cAAA;MACAW,kBAAA;MACAE,WAAA;MACAX,OAAA;MACAU,SAAA;MACAN,UAAA;MACAC,eAAA;MACAS,qBAAA;MACAR,qBAAA;MACAC,WAAA;MACAC,eAAA;MACApB,aAAA;MACAC,kBAAA;MACAC,cAAA;MACAC,WAAA;MACAC,kBAAA;MACAC,kBAAA;MACAC,SAAA;MACAkB,QAAA;MACAjB,IAAA;MACAvB,CAAA;MACA2B,cAAA;MACAmB,OAAA,EAAS5C;IAAA;EAAA;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}