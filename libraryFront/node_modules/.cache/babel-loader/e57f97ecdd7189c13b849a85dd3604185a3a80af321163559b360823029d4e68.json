{"ast":null,"code":"import { defineComponent, ref, h, cloneVNode } from 'vue';\nimport _Popper from '../../popper/index.mjs';\nimport { UPDATE_MODEL_EVENT } from '../../../utils/constants.mjs';\nimport { throwError } from '../../../utils/error.mjs';\nimport { getFirstValidNode } from '../../../utils/vnode.mjs';\nimport popperDefaultProps from '../../popper/src/use-popper/defaults.mjs';\nvar Tooltip = defineComponent({\n  name: \"ElTooltip\",\n  components: {\n    ElPopper: _Popper\n  },\n  props: {\n    ...popperDefaultProps,\n    manual: {\n      type: Boolean,\n      default: false\n    },\n    modelValue: {\n      type: Boolean,\n      validator: val => {\n        return typeof val === \"boolean\";\n      },\n      default: void 0\n    },\n    openDelay: {\n      type: Number,\n      default: 0\n    },\n    visibleArrow: {\n      type: Boolean,\n      default: true\n    },\n    tabindex: {\n      type: [String, Number],\n      default: \"0\"\n    }\n  },\n  emits: [UPDATE_MODEL_EVENT],\n  setup(props, ctx) {\n    if (props.manual && typeof props.modelValue === \"undefined\") {\n      throwError(\"[ElTooltip]\", \"You need to pass a v-model to el-tooltip when `manual` is true\");\n    }\n    const popper = ref(null);\n    const onUpdateVisible = val => {\n      ctx.emit(UPDATE_MODEL_EVENT, val);\n    };\n    const updatePopper = () => {\n      return popper.value.update();\n    };\n    return {\n      popper,\n      onUpdateVisible,\n      updatePopper\n    };\n  },\n  render() {\n    const {\n      $slots,\n      content,\n      manual,\n      openDelay,\n      onUpdateVisible,\n      showAfter,\n      visibleArrow,\n      modelValue,\n      tabindex,\n      fallbackPlacements\n    } = this;\n    const throwErrorTip = () => {\n      throwError(\"[ElTooltip]\", \"you need to provide a valid default slot.\");\n    };\n    const popper = h(_Popper, {\n      ...Object.keys(popperDefaultProps).reduce((result, key) => {\n        return {\n          ...result,\n          [key]: this[key]\n        };\n      }, {}),\n      ref: \"popper\",\n      manualMode: manual,\n      showAfter: openDelay || showAfter,\n      showArrow: visibleArrow,\n      visible: modelValue,\n      \"onUpdate:visible\": onUpdateVisible,\n      fallbackPlacements: fallbackPlacements.length ? fallbackPlacements : [\"bottom-start\", \"top-start\", \"right\", \"left\"]\n    }, {\n      default: () => $slots.content ? $slots.content() : content,\n      trigger: () => {\n        if ($slots.default) {\n          const firstVnode = getFirstValidNode($slots.default(), 1);\n          if (!firstVnode) throwErrorTip();\n          return cloneVNode(firstVnode, {\n            tabindex\n          }, true);\n        }\n        throwErrorTip();\n      }\n    });\n    return popper;\n  }\n});\nexport { Tooltip as default };","map":{"version":3,"names":["Tooltip","defineComponent","name","components","ElPopper","_Popper","props","popperDefaultProps","manual","type","Boolean","default","modelValue","validator","val","openDelay","Number","visibleArrow","tabindex","String","emits","UPDATE_MODEL_EVENT","setup","ctx","throwError","popper","ref","onUpdateVisible","emit","updatePopper","value","update","render","$slots","content","showAfter","fallbackPlacements","throwErrorTip","h","Object","keys","reduce","result","key","manualMode","showArrow","visible","length","trigger","firstVnode","getFirstValidNode","cloneVNode"],"sources":["../../../../../../packages/components/tooltip/src/index.ts"],"sourcesContent":["import { defineComponent, h, ref, cloneVNode } from 'vue'\nimport {\n  default as ElPopper,\n  popperDefaultProps,\n} from '@element-plus/components/popper'\nimport { UPDATE_MODEL_EVENT } from '@element-plus/utils/constants'\nimport { throwError } from '@element-plus/utils/error'\nimport { getFirstValidNode } from '@element-plus/utils/vnode'\n\n/**\n * ElTooltip\n * Tooltip is essentially an upper layer for Popper, due to popper has already implemented so many functionalities and Popper is essentially a component shared internally\n * Tooltip also does the API translation work for popper.\n * Tooltip shares the exact same API which v2 has, so that the user should be able to\n */\nexport default defineComponent({\n  name: 'ElTooltip',\n  components: {\n    ElPopper,\n  },\n  props: {\n    ...popperDefaultProps,\n    manual: {\n      type: Boolean,\n      default: false,\n    },\n    modelValue: {\n      type: Boolean,\n      validator: (val: unknown) => {\n        return typeof val === 'boolean'\n      },\n      default: undefined,\n    },\n    // This API should be decaprecate since it's confusing with close-delay\n    openDelay: {\n      type: Number,\n      default: 0,\n    },\n    visibleArrow: {\n      type: Boolean,\n      default: true,\n    },\n    tabindex: {\n      type: [String, Number],\n      default: '0',\n    },\n  },\n  emits: [UPDATE_MODEL_EVENT],\n  setup(props, ctx) {\n    // when manual mode is true, v-model must be passed down\n    if (props.manual && typeof props.modelValue === 'undefined') {\n      throwError(\n        '[ElTooltip]',\n        'You need to pass a v-model to el-tooltip when `manual` is true'\n      )\n    }\n\n    const popper = ref(null)\n\n    const onUpdateVisible = (val) => {\n      ctx.emit(UPDATE_MODEL_EVENT, val)\n    }\n\n    const updatePopper = () => {\n      return popper.value.update()\n    }\n\n    return {\n      popper,\n      onUpdateVisible,\n      updatePopper,\n    }\n  },\n  render() {\n    const {\n      $slots,\n      content,\n      manual,\n      openDelay,\n      onUpdateVisible,\n      showAfter,\n      visibleArrow,\n      modelValue,\n      tabindex,\n      fallbackPlacements,\n    } = this\n\n    const throwErrorTip = () => {\n      throwError('[ElTooltip]', 'you need to provide a valid default slot.')\n    }\n\n    const popper = h(\n      ElPopper,\n      {\n        ...Object.keys(popperDefaultProps).reduce((result, key) => {\n          return { ...result, [key]: this[key] }\n        }, {}),\n        ref: 'popper',\n        manualMode: manual,\n        showAfter: openDelay || showAfter, // this is for mapping API due to we decided to rename the current openDelay API to showAfter for better readability,\n        showArrow: visibleArrow,\n        visible: modelValue,\n        'onUpdate:visible': onUpdateVisible,\n        fallbackPlacements: fallbackPlacements.length\n          ? fallbackPlacements\n          : ['bottom-start', 'top-start', 'right', 'left'],\n      },\n      {\n        default: () => ($slots.content ? $slots.content() : content),\n        trigger: () => {\n          if ($slots.default) {\n            const firstVnode = getFirstValidNode($slots.default(), 1)\n            if (!firstVnode) throwErrorTip()\n            return cloneVNode(firstVnode, { tabindex }, true)\n          }\n          throwErrorTip()\n        },\n      }\n    )\n\n    return popper\n  },\n})\n"],"mappings":";;;;;;AAeA,IAAAA,OAAA,GAAeC,eAAA,CAAgB;EAC7BC,IAAA,EAAM;EACNC,UAAA,EAAY;IAAAC,QAAA,EACVC;EAAA;EAEFC,KAAA,EAAO;IAAA,GACFC,kBAAA;IACHC,MAAA,EAAQ;MACNC,IAAA,EAAMC,OAAA;MACNC,OAAA,EAAS;IAAA;IAEXC,UAAA,EAAY;MACVH,IAAA,EAAMC,OAAA;MACNG,SAAA,EAAYC,GAAA,IAAiB;QAC3B,OAAO,OAAOA,GAAA,KAAQ;MAAA;MAExBH,OAAA,EAAS;IAAA;IAGXI,SAAA,EAAW;MACTN,IAAA,EAAMO,MAAA;MACNL,OAAA,EAAS;IAAA;IAEXM,YAAA,EAAc;MACZR,IAAA,EAAMC,OAAA;MACNC,OAAA,EAAS;IAAA;IAEXO,QAAA,EAAU;MACRT,IAAA,EAAM,CAACU,MAAA,EAAQH,MAAA;MACfL,OAAA,EAAS;IAAA;EAAA;EAGbS,KAAA,EAAO,CAACC,kBAAA;EACRC,MAAMhB,KAAA,EAAOiB,GAAA,EAAK;IAEhB,IAAIjB,KAAA,CAAME,MAAA,IAAU,OAAOF,KAAA,CAAMM,UAAA,KAAe,aAAa;MAC3DY,UAAA,CACE,eACA;IAAA;IAIJ,MAAMC,MAAA,GAASC,GAAA,CAAI;IAEnB,MAAMC,eAAA,GAAmBb,GAAA,IAAQ;MAC/BS,GAAA,CAAIK,IAAA,CAAKP,kBAAA,EAAoBP,GAAA;IAAA;IAG/B,MAAMe,YAAA,GAAeA,CAAA,KAAM;MACzB,OAAOJ,MAAA,CAAOK,KAAA,CAAMC,MAAA;IAAA;IAGtB,OAAO;MACLN,MAAA;MACAE,eAAA;MACAE;IAAA;EAAA;EAGJG,OAAA,EAAS;IACP,MAAM;MACJC,MAAA;MACAC,OAAA;MACA1B,MAAA;MACAO,SAAA;MACAY,eAAA;MACAQ,SAAA;MACAlB,YAAA;MACAL,UAAA;MACAM,QAAA;MACAkB;IAAA,IACE;IAEJ,MAAMC,aAAA,GAAgBA,CAAA,KAAM;MAC1Bb,UAAA,CAAW,eAAe;IAAA;IAG5B,MAAMC,MAAA,GAASa,CAAA,CACbjC,OAAA,EACA;MAAA,GACKkC,MAAA,CAAOC,IAAA,CAAKjC,kBAAA,EAAoBkC,MAAA,CAAO,CAACC,MAAA,EAAQC,GAAA,KAAQ;QACzD,OAAO;UAAA,GAAKD,MAAA;UAAA,CAASC,GAAA,GAAM,KAAKA,GAAA;QAAA;MAAA,GAC/B;MACHjB,GAAA,EAAK;MACLkB,UAAA,EAAYpC,MAAA;MACZ2B,SAAA,EAAWpB,SAAA,IAAaoB,SAAA;MACxBU,SAAA,EAAW5B,YAAA;MACX6B,OAAA,EAASlC,UAAA;MACT,oBAAoBe,eAAA;MACpBS,kBAAA,EAAoBA,kBAAA,CAAmBW,MAAA,GACnCX,kBAAA,GACA,CAAC,gBAAgB,aAAa,SAAS;IAAA,GAE7C;MACEzB,OAAA,EAASA,CAAA,KAAOsB,MAAA,CAAOC,OAAA,GAAUD,MAAA,CAAOC,OAAA,KAAYA,OAAA;MACpDc,OAAA,EAASA,CAAA,KAAM;QACb,IAAIf,MAAA,CAAOtB,OAAA,EAAS;UAClB,MAAMsC,UAAA,GAAaC,iBAAA,CAAkBjB,MAAA,CAAOtB,OAAA,IAAW;UACvD,IAAI,CAACsC,UAAA,EAAYZ,aAAA;UACjB,OAAOc,UAAA,CAAWF,UAAA,EAAY;YAAE/B;UAAA,GAAY;QAAA;QAE9CmB,aAAA;MAAA;IAAA;IAKN,OAAOZ,MAAA;EAAA;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}