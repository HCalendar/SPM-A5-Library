{"ast":null,"code":"import { isVNode, Fragment, Text, Comment, openBlock, createBlock, createCommentVNode, camelize } from 'vue';\nimport { hasOwn } from '@vue/shared';\nimport { debugWarn } from './error.mjs';\nconst TEMPLATE = \"template\";\nconst SCOPE = \"VNode\";\nvar PatchFlags = /* @__PURE__ */(PatchFlags2 => {\n  PatchFlags2[PatchFlags2[\"TEXT\"] = 1] = \"TEXT\";\n  PatchFlags2[PatchFlags2[\"CLASS\"] = 2] = \"CLASS\";\n  PatchFlags2[PatchFlags2[\"STYLE\"] = 4] = \"STYLE\";\n  PatchFlags2[PatchFlags2[\"PROPS\"] = 8] = \"PROPS\";\n  PatchFlags2[PatchFlags2[\"FULL_PROPS\"] = 16] = \"FULL_PROPS\";\n  PatchFlags2[PatchFlags2[\"HYDRATE_EVENTS\"] = 32] = \"HYDRATE_EVENTS\";\n  PatchFlags2[PatchFlags2[\"STABLE_FRAGMENT\"] = 64] = \"STABLE_FRAGMENT\";\n  PatchFlags2[PatchFlags2[\"KEYED_FRAGMENT\"] = 128] = \"KEYED_FRAGMENT\";\n  PatchFlags2[PatchFlags2[\"UNKEYED_FRAGMENT\"] = 256] = \"UNKEYED_FRAGMENT\";\n  PatchFlags2[PatchFlags2[\"NEED_PATCH\"] = 512] = \"NEED_PATCH\";\n  PatchFlags2[PatchFlags2[\"DYNAMIC_SLOTS\"] = 1024] = \"DYNAMIC_SLOTS\";\n  PatchFlags2[PatchFlags2[\"HOISTED\"] = -1] = \"HOISTED\";\n  PatchFlags2[PatchFlags2[\"BAIL\"] = -2] = \"BAIL\";\n  return PatchFlags2;\n})(PatchFlags || {});\nconst isFragment = node => isVNode(node) && node.type === Fragment;\nconst isText = node => node.type === Text;\nconst isComment = node => node.type === Comment;\nconst isTemplate = node => node.type === TEMPLATE;\nfunction getChildren(node, depth) {\n  if (isComment(node)) return;\n  if (isFragment(node) || isTemplate(node)) {\n    return depth > 0 ? getFirstValidNode(node.children, depth - 1) : void 0;\n  }\n  return node;\n}\nconst isValidElementNode = node => isVNode(node) && !isFragment(node) && !isComment(node);\nconst getFirstValidNode = (nodes, maxDepth = 3) => {\n  if (Array.isArray(nodes)) {\n    return getChildren(nodes[0], maxDepth);\n  } else {\n    return getChildren(nodes, maxDepth);\n  }\n};\nfunction renderIf(condition, node, props, children, patchFlag, patchProps) {\n  return condition ? renderBlock(node, props, children, patchFlag, patchProps) : createCommentVNode(\"v-if\", true);\n}\nfunction renderBlock(node, props, children, patchFlag, patchProps) {\n  return openBlock(), createBlock(node, props, children, patchFlag, patchProps);\n}\nconst getNormalizedProps = node => {\n  if (!isVNode(node)) {\n    debugWarn(SCOPE, \"value must be a VNode\");\n    return;\n  }\n  const raw = node.props || {};\n  const type = node.type.props || {};\n  const props = {};\n  Object.keys(type).forEach(key => {\n    if (hasOwn(type[key], \"default\")) {\n      props[key] = type[key].default;\n    }\n  });\n  Object.keys(raw).forEach(key => {\n    props[camelize(key)] = raw[key];\n  });\n  return props;\n};\nexport { PatchFlags, SCOPE, getFirstValidNode, getNormalizedProps, isComment, isFragment, isTemplate, isText, isValidElementNode, renderBlock, renderIf };","map":{"version":3,"names":["TEMPLATE","SCOPE","PatchFlags","PatchFlags2","isFragment","node","isVNode","type","Fragment","isText","Text","isComment","Comment","isTemplate","getChildren","depth","getFirstValidNode","children","isValidElementNode","nodes","maxDepth","Array","isArray","condition","props","patchFlag","patchProps","renderBlock","createCommentVNode","openBlock","createBlock","getNormalizedProps","debugWarn","raw","Object","keys","forEach","key","hasOwn","default","camelize"],"sources":["../../../../packages/utils/vnode.ts"],"sourcesContent":["import {\n  Fragment,\n  Text,\n  Comment,\n  createBlock,\n  openBlock,\n  createCommentVNode,\n  isVNode,\n  camelize,\n} from 'vue'\n\nimport { hasOwn } from '@vue/shared'\nimport { debugWarn } from './error'\nimport type { VNode, VNodeTypes, VNodeChild } from 'vue'\n\ntype Children = VNodeTypes[] | VNodeTypes\n\nconst TEMPLATE = 'template'\n\nexport const SCOPE = 'VNode'\n\nexport enum PatchFlags {\n  TEXT = 1,\n  CLASS = 2,\n  STYLE = 4,\n  PROPS = 8,\n  FULL_PROPS = 16,\n  HYDRATE_EVENTS = 32,\n  STABLE_FRAGMENT = 64,\n  KEYED_FRAGMENT = 128,\n  UNKEYED_FRAGMENT = 256,\n  NEED_PATCH = 512,\n  DYNAMIC_SLOTS = 1024,\n  HOISTED = -1,\n  BAIL = -2,\n}\n\nexport const isFragment = (node: unknown): node is VNode =>\n  isVNode(node) && node.type === Fragment\n\nexport const isText = (node: VNodeChild) => (node as VNode).type === Text\n\nexport const isComment = (node: VNodeChild) => (node as VNode).type === Comment\n\nexport const isTemplate = (node: VNodeChild) =>\n  (node as VNode).type === TEMPLATE\n\n/**\n * get a valid child node (not fragment nor comment)\n * @param node {VNode} node to be searched\n * @param depth {number} depth to be searched\n */\nfunction getChildren(node: VNode, depth: number): undefined | VNode {\n  if (isComment(node)) return\n  if (isFragment(node) || isTemplate(node)) {\n    return depth > 0\n      ? getFirstValidNode(node.children as VNodeChild, depth - 1)\n      : undefined\n  }\n  return node\n}\n\n/**\n * determine if the element is a valid element type rather than fragments and comment e.g. <template> v-if\n * @param node {VNode} node to be tested\n */\nexport const isValidElementNode = (node: unknown): node is VNode =>\n  isVNode(node) && !isFragment(node) && !isComment(node)\n\nexport const getFirstValidNode = (\n  nodes: VNodeChild,\n  maxDepth = 3\n): ReturnType<typeof getChildren> => {\n  if (Array.isArray(nodes)) {\n    return getChildren(nodes[0] as VNode, maxDepth)\n  } else {\n    return getChildren(nodes as VNode, maxDepth)\n  }\n}\n\nexport function renderIf(\n  condition: boolean,\n  node: VNodeTypes,\n  props: any,\n  children?: Children,\n  patchFlag?: number,\n  patchProps?: string[]\n) {\n  return condition\n    ? renderBlock(node, props, children, patchFlag, patchProps)\n    : createCommentVNode('v-if', true)\n}\n\nexport function renderBlock(\n  node: VNodeTypes,\n  props: any,\n  children?: Children,\n  patchFlag?: number,\n  patchProps?: string[]\n) {\n  return openBlock(), createBlock(node, props, children, patchFlag, patchProps)\n}\n\n/**\n * todo\n * get normalized props from VNode\n * @param node\n */\nexport const getNormalizedProps = (node: VNode) => {\n  if (!isVNode(node)) {\n    debugWarn(SCOPE, 'value must be a VNode')\n    return\n  }\n\n  const raw = node.props || {}\n  const type = (node.type as any).props || {}\n  const props = {} as any\n\n  Object.keys(type).forEach((key) => {\n    if (hasOwn(type[key], 'default')) {\n      props[key] = type[key].default\n    }\n  })\n\n  Object.keys(raw).forEach((key) => {\n    props[camelize(key)] = raw[key]\n  })\n\n  return props\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}