{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { defineComponent, ref, computed, watch } from 'vue';\nimport { ElIcon } from '../../icon/index.mjs';\nimport { avatarProps, avatarEmits } from './avatar.mjs';\nvar script = defineComponent({\n  name: \"ElAvatar\",\n  components: {\n    ElIcon\n  },\n  props: avatarProps,\n  emits: avatarEmits,\n  setup(props, {\n    emit\n  }) {\n    const hasLoadError = ref(false);\n    const avatarClass = computed(() => {\n      const {\n        size,\n        icon,\n        shape\n      } = props;\n      const classList = [\"el-avatar\"];\n      if (size && typeof size === \"string\") classList.push(`el-avatar--${size}`);\n      if (icon) classList.push(\"el-avatar--icon\");\n      if (shape) classList.push(`el-avatar--${shape}`);\n      return classList;\n    });\n    const sizeStyle = computed(() => {\n      const {\n        size\n      } = props;\n      return typeof size === \"number\" ? {\n        height: `${size}px`,\n        width: `${size}px`,\n        lineHeight: `${size}px`\n      } : {};\n    });\n    const fitStyle = computed(() => ({\n      objectFit: props.fit\n    }));\n    watch(() => props.src, () => hasLoadError.value = false);\n    function handleError(e) {\n      hasLoadError.value = true;\n      emit(\"error\", e);\n    }\n    return {\n      hasLoadError,\n      avatarClass,\n      sizeStyle,\n      fitStyle,\n      handleError\n    };\n  }\n});\nexport { script as default };","map":{"version":3,"names":["script","defineComponent","name","components","ElIcon","props","avatarProps","emits","avatarEmits","setup","emit","hasLoadError","ref","avatarClass","computed","size","icon","shape","classList","push","sizeStyle","height","width","lineHeight","fitStyle","objectFit","fit","watch","src","value","handleError","e"],"sources":["../../../../../../packages/components/avatar/src/avatar.vue"],"sourcesContent":["<template>\n  <span :class=\"avatarClass\" :style=\"sizeStyle\">\n    <img\n      v-if=\"(src || srcSet) && !hasLoadError\"\n      :src=\"src\"\n      :alt=\"alt\"\n      :srcset=\"srcSet\"\n      :style=\"fitStyle\"\n      @error=\"handleError\"\n    />\n    <el-icon v-else-if=\"icon\"><component :is=\"icon\" /></el-icon>\n    <slot v-else></slot>\n  </span>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed, ref, watch } from 'vue'\nimport { ElIcon } from '@element-plus/components/icon'\nimport { avatarEmits, avatarProps } from './avatar'\n\nimport type { CSSProperties } from 'vue'\n\nexport default defineComponent({\n  name: 'ElAvatar',\n  components: {\n    ElIcon,\n  },\n  props: avatarProps,\n  emits: avatarEmits,\n\n  setup(props, { emit }) {\n    const hasLoadError = ref(false)\n\n    const avatarClass = computed(() => {\n      const { size, icon, shape } = props\n      const classList = ['el-avatar']\n      if (size && typeof size === 'string') classList.push(`el-avatar--${size}`)\n      if (icon) classList.push('el-avatar--icon')\n      if (shape) classList.push(`el-avatar--${shape}`)\n      return classList\n    })\n\n    const sizeStyle = computed<CSSProperties>(() => {\n      const { size } = props\n      return typeof size === 'number'\n        ? {\n            height: `${size}px`,\n            width: `${size}px`,\n            lineHeight: `${size}px`,\n          }\n        : {}\n    })\n\n    const fitStyle = computed<CSSProperties>(() => ({\n      objectFit: props.fit,\n    }))\n\n    // need reset hasLoadError to false if src changed\n    watch(\n      () => props.src,\n      () => (hasLoadError.value = false)\n    )\n\n    function handleError(e: Event) {\n      hasLoadError.value = true\n      emit('error', e)\n    }\n\n    return {\n      hasLoadError,\n      avatarClass,\n      sizeStyle,\n      fitStyle,\n      handleError,\n    }\n  },\n})\n</script>\n"],"mappings":";;;;AAsBA,IAAAA,MAAA,GAAeC,eAAA,CAAgB;EAC7BC,IAAA,EAAM;EACNC,UAAA,EAAY;IACVC;EAAA;EAEFC,KAAA,EAAOC,WAAA;EACPC,KAAA,EAAOC,WAAA;EAEPC,MAAMJ,KAAA,EAAO;IAAEK;EAAA,GAAQ;IACrB,MAAMC,YAAA,GAAeC,GAAA,CAAI;IAEzB,MAAMC,WAAA,GAAcC,QAAA,CAAS,MAAM;MACjC,MAAM;QAAEC,IAAA;QAAMC,IAAA;QAAMC;MAAA,IAAUZ,KAAA;MAC9B,MAAMa,SAAA,GAAY,CAAC;MACnB,IAAIH,IAAA,IAAQ,OAAOA,IAAA,KAAS,UAAUG,SAAA,CAAUC,IAAA,CAAK,cAAcJ,IAAA;MACnE,IAAIC,IAAA,EAAME,SAAA,CAAUC,IAAA,CAAK;MACzB,IAAIF,KAAA,EAAOC,SAAA,CAAUC,IAAA,CAAK,cAAcF,KAAA;MACxC,OAAOC,SAAA;IAAA;IAGT,MAAME,SAAA,GAAYN,QAAA,CAAwB,MAAM;MAC9C,MAAM;QAAEC;MAAA,IAASV,KAAA;MACjB,OAAO,OAAOU,IAAA,KAAS,WACnB;QACEM,MAAA,EAAQ,GAAGN,IAAA;QACXO,KAAA,EAAO,GAAGP,IAAA;QACVQ,UAAA,EAAY,GAAGR,IAAA;MAAA,IAEjB;IAAA;IAGN,MAAMS,QAAA,GAAWV,QAAA,CAAwB;MACvCW,SAAA,EAAWpB,KAAA,CAAMqB;IAAA;IAInBC,KAAA,CACE,MAAMtB,KAAA,CAAMuB,GAAA,EACZ,MAAOjB,YAAA,CAAakB,KAAA,GAAQ;IAG9B,SAAAC,YAAqBC,CAAA,EAAU;MAC7BpB,YAAA,CAAakB,KAAA,GAAQ;MACrBnB,IAAA,CAAK,SAASqB,CAAA;IAAA;IAGhB,OAAO;MACLpB,YAAA;MACAE,WAAA;MACAO,SAAA;MACAI,QAAA;MACAM;IAAA;EAAA;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}