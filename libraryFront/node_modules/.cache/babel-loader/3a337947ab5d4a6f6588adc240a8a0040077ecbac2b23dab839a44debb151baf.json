{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { inject, provide } from 'vue';\nfunction useNodeExpandEventBroadcast(props) {\n  const parentNodeMap = inject(\"TreeNodeMap\", null);\n  const currentNodeMap = {\n    treeNodeExpand: node => {\n      if (props.node !== node) {\n        props.node.collapse();\n      }\n    },\n    children: []\n  };\n  if (parentNodeMap) {\n    parentNodeMap.children.push(currentNodeMap);\n  }\n  provide(\"TreeNodeMap\", currentNodeMap);\n  return {\n    broadcastExpanded: node => {\n      if (!props.accordion) return;\n      for (const childNode of currentNodeMap.children) {\n        childNode.treeNodeExpand(node);\n      }\n    }\n  };\n}\nexport { useNodeExpandEventBroadcast };","map":{"version":3,"names":["props","parentNodeMap","inject","currentNodeMap","treeNodeExpand","node","collapse","children","push","provide","broadcastExpanded","accordion","childNode"],"sources":["../../../../../../../packages/components/tree/src/model/useNodeExpandEventBroadcast.ts"],"sourcesContent":["import { inject, provide } from 'vue'\nimport type Node from '../model/node'\n\ninterface NodeMap {\n  treeNodeExpand(node: Node): void\n  children: NodeMap[]\n}\n\nexport function useNodeExpandEventBroadcast(props) {\n  const parentNodeMap = inject<NodeMap>('TreeNodeMap', null)\n  const currentNodeMap: NodeMap = {\n    treeNodeExpand: (node) => {\n      if (props.node !== node) {\n        props.node.collapse()\n      }\n    },\n    children: [],\n  }\n\n  if (parentNodeMap) {\n    parentNodeMap.children.push(currentNodeMap)\n  }\n\n  provide('TreeNodeMap', currentNodeMap)\n\n  return {\n    broadcastExpanded: (node: Node): void => {\n      if (!props.accordion) return\n      for (const childNode of currentNodeMap.children) {\n        childNode.treeNodeExpand(node)\n      }\n    },\n  }\n}\n"],"mappings":";;qCAQ4CA,KAAA,EAAO;EACjD,MAAMC,aAAA,GAAgBC,MAAA,CAAgB,eAAe;EACrD,MAAMC,cAAA,GAA0B;IAC9BC,cAAA,EAAiBC,IAAA,IAAS;MACxB,IAAIL,KAAA,CAAMK,IAAA,KAASA,IAAA,EAAM;QACvBL,KAAA,CAAMK,IAAA,CAAKC,QAAA;MAAA;IAAA;IAGfC,QAAA,EAAU;EAAA;EAGZ,IAAIN,aAAA,EAAe;IACjBA,aAAA,CAAcM,QAAA,CAASC,IAAA,CAAKL,cAAA;EAAA;EAG9BM,OAAA,CAAQ,eAAeN,cAAA;EAEvB,OAAO;IACLO,iBAAA,EAAoBL,IAAA,IAAqB;MACvC,IAAI,CAACL,KAAA,CAAMW,SAAA,EAAW;MACtB,WAAWC,SAAA,IAAaT,cAAA,CAAeI,QAAA,EAAU;QAC/CK,SAAA,CAAUR,cAAA,CAAeC,IAAA;MAAA;IAAA;EAAA;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}