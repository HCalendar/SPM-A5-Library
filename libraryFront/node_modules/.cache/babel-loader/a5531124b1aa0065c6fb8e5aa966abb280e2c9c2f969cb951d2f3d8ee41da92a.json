{"ast":null,"code":"import { resolveComponent, openBlock, createElementBlock, createVNode, withCtx, renderSlot, createElementVNode, normalizeClass, createBlock } from 'vue';\nconst _hoisted_1 = {\n  class: \"el-dropdown\"\n};\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_scrollbar = resolveComponent(\"el-scrollbar\");\n  const _component_el_button = resolveComponent(\"el-button\");\n  const _component_arrow_down = resolveComponent(\"arrow-down\");\n  const _component_el_icon = resolveComponent(\"el-icon\");\n  const _component_el_button_group = resolveComponent(\"el-button-group\");\n  const _component_el_popper = resolveComponent(\"el-popper\");\n  return openBlock(), createElementBlock(\"div\", _hoisted_1, [createVNode(_component_el_popper, {\n    ref: \"triggerVnode\",\n    visible: _ctx.visible,\n    \"onUpdate:visible\": _cache[0] || (_cache[0] = $event => _ctx.visible = $event),\n    placement: _ctx.placement,\n    \"fallback-placements\": [\"bottom\", \"top\", \"right\", \"left\"],\n    effect: _ctx.effect,\n    pure: \"\",\n    \"manual-mode\": true,\n    trigger: [_ctx.trigger],\n    \"popper-class\": \"el-dropdown__popper\",\n    \"append-to-body\": \"\",\n    transition: \"el-zoom-in-top\",\n    \"stop-popper-mouse-event\": false,\n    \"gpu-acceleration\": false\n  }, {\n    default: withCtx(() => [createVNode(_component_el_scrollbar, {\n      ref: \"scrollbar\",\n      tag: \"ul\",\n      \"wrap-style\": _ctx.wrapStyle,\n      \"view-class\": \"el-dropdown__list\"\n    }, {\n      default: withCtx(() => [renderSlot(_ctx.$slots, \"dropdown\")]),\n      _: 3\n    }, 8, [\"wrap-style\"])]),\n    trigger: withCtx(() => [createElementVNode(\"div\", {\n      class: normalizeClass([_ctx.dropdownSize ? \"el-dropdown--\" + _ctx.dropdownSize : \"\"])\n    }, [!_ctx.splitButton ? renderSlot(_ctx.$slots, \"default\", {\n      key: 0\n    }) : (openBlock(), createBlock(_component_el_button_group, {\n      key: 1\n    }, {\n      default: withCtx(() => [createVNode(_component_el_button, {\n        size: _ctx.dropdownSize,\n        type: _ctx.type,\n        onClick: _ctx.handlerMainButtonClick\n      }, {\n        default: withCtx(() => [renderSlot(_ctx.$slots, \"default\")]),\n        _: 3\n      }, 8, [\"size\", \"type\", \"onClick\"]), createVNode(_component_el_button, {\n        size: _ctx.dropdownSize,\n        type: _ctx.type,\n        class: \"el-dropdown__caret-button\"\n      }, {\n        default: withCtx(() => [createVNode(_component_el_icon, {\n          class: \"el-dropdown__icon\"\n        }, {\n          default: withCtx(() => [createVNode(_component_arrow_down)]),\n          _: 1\n        })]),\n        _: 1\n      }, 8, [\"size\", \"type\"])]),\n      _: 3\n    }))], 2)]),\n    _: 3\n  }, 8, [\"visible\", \"placement\", \"effect\", \"trigger\"])]);\n}\nexport { render };","map":{"version":3,"names":["class","createElementBlock","_hoisted_1","createVNode","_component_el_popper","ref","visible","_ctx","$event","placement","effect","pure","trigger","transition","default","withCtx","_component_el_scrollbar","tag","wrapStyle","renderSlot","$slots","createElementVNode","normalizeClass","dropdownSize","splitButton","key","openBlock","createBlock","_component_el_button_group","_component_el_button","size","type","onClick","handlerMainButtonClick","_component_el_icon","_component_arrow_down","_"],"sources":["../../../../../../packages/components/dropdown/src/dropdown.vue?vue&type=template&id=3ed790a5&lang.js"],"sourcesContent":["<template>\n  <div class=\"el-dropdown\">\n    <el-popper\n      ref=\"triggerVnode\"\n      v-model:visible=\"visible\"\n      :placement=\"placement\"\n      :fallback-placements=\"['bottom', 'top', 'right', 'left']\"\n      :effect=\"effect\"\n      pure\n      :manual-mode=\"true\"\n      :trigger=\"[trigger]\"\n      popper-class=\"el-dropdown__popper\"\n      append-to-body\n      transition=\"el-zoom-in-top\"\n      :stop-popper-mouse-event=\"false\"\n      :gpu-acceleration=\"false\"\n    >\n      <template #default>\n        <el-scrollbar\n          ref=\"scrollbar\"\n          tag=\"ul\"\n          :wrap-style=\"wrapStyle\"\n          view-class=\"el-dropdown__list\"\n        >\n          <slot name=\"dropdown\"></slot>\n        </el-scrollbar>\n      </template>\n      <template #trigger>\n        <div :class=\"[dropdownSize ? 'el-dropdown--' + dropdownSize : '']\">\n          <slot v-if=\"!splitButton\" name=\"default\"></slot>\n          <template v-else>\n            <el-button-group>\n              <el-button\n                :size=\"dropdownSize\"\n                :type=\"type\"\n                @click=\"handlerMainButtonClick\"\n              >\n                <slot name=\"default\"></slot>\n              </el-button>\n              <el-button\n                :size=\"dropdownSize\"\n                :type=\"type\"\n                class=\"el-dropdown__caret-button\"\n              >\n                <el-icon class=\"el-dropdown__icon\"><arrow-down /></el-icon>\n              </el-button>\n            </el-button-group>\n          </template>\n        </div>\n      </template>\n    </el-popper>\n  </div>\n</template>\n<script lang=\"ts\">\nimport {\n  defineComponent,\n  provide,\n  getCurrentInstance,\n  ref,\n  computed,\n  watch,\n  onMounted,\n} from 'vue'\nimport ElButton from '@element-plus/components/button'\nimport ElPopper, { Effect } from '@element-plus/components/popper'\nimport ElScrollbar from '@element-plus/components/scrollbar'\nimport ElIcon from '@element-plus/components/icon'\nimport { on, addClass, removeClass } from '@element-plus/utils/dom'\nimport { addUnit } from '@element-plus/utils/util'\nimport { ArrowDown } from '@element-plus/icons-vue'\nimport { useSize } from '@element-plus/hooks'\n\nimport type { Placement } from '@element-plus/components/popper'\nimport type { PropType, ComponentPublicInstance, CSSProperties } from 'vue'\nimport type { TriggerType } from '@element-plus/hooks/use-popper/use-target-events'\nimport type { ButtonType } from '@element-plus/components/button/src/types'\n\ntype Nullable<T> = null | T\nconst { ButtonGroup: ElButtonGroup } = ElButton\n\nexport default defineComponent({\n  name: 'ElDropdown',\n  components: {\n    ElButton,\n    ElButtonGroup,\n    ElScrollbar,\n    ElPopper,\n    ElIcon,\n    ArrowDown,\n  },\n  props: {\n    trigger: {\n      type: String as PropType<TriggerType | 'contextmenu'>,\n      default: 'hover',\n    },\n    type: String as PropType<ButtonType>,\n    size: {\n      type: String,\n      default: '',\n    },\n    splitButton: Boolean,\n    hideOnClick: {\n      type: Boolean,\n      default: true,\n    },\n    placement: {\n      type: String as PropType<Placement>,\n      default: 'bottom',\n    },\n    showTimeout: {\n      type: Number,\n      default: 150,\n    },\n    hideTimeout: {\n      type: Number,\n      default: 150,\n    },\n    tabindex: {\n      type: [Number, String],\n      default: 0,\n    },\n    effect: {\n      type: String as PropType<Effect>,\n      default: Effect.LIGHT,\n    },\n    maxHeight: {\n      type: [Number, String],\n      default: '',\n    },\n  },\n  emits: ['visible-change', 'click', 'command'],\n  setup(props, { emit }) {\n    const _instance = getCurrentInstance()\n\n    const timeout = ref<Nullable<number>>(null)\n\n    const visible = ref(false)\n    const scrollbar = ref(null)\n    const wrapStyle = computed<CSSProperties>(() => ({\n      maxHeight: addUnit(props.maxHeight),\n    }))\n\n    watch(\n      () => visible.value,\n      (val) => {\n        if (val) triggerElmFocus()\n        if (!val) triggerElmBlur()\n        emit('visible-change', val)\n      }\n    )\n\n    const focusing = ref(false)\n    watch(\n      () => focusing.value,\n      (val) => {\n        const selfDefine = triggerElm.value\n        if (selfDefine) {\n          if (val) {\n            addClass(selfDefine, 'focusing')\n          } else {\n            removeClass(selfDefine, 'focusing')\n          }\n        }\n      }\n    )\n\n    const triggerVnode = ref<Nullable<ComponentPublicInstance>>(null)\n    const triggerElm = computed<Nullable<HTMLButtonElement>>(() => {\n      const _: any = (triggerVnode.value?.$refs.triggerRef as HTMLElement)\n        ?.children[0]\n      return !props.splitButton ? _ : _?.children?.[1]\n    })\n\n    function handleClick() {\n      if (triggerElm.value?.disabled) return\n      if (visible.value) {\n        hide()\n      } else {\n        show()\n      }\n    }\n\n    function show() {\n      if (triggerElm.value?.disabled) return\n      timeout.value && clearTimeout(timeout.value)\n      timeout.value = window.setTimeout(\n        () => {\n          visible.value = true\n        },\n        ['click', 'contextmenu'].includes(props.trigger) ? 0 : props.showTimeout\n      )\n    }\n\n    function hide() {\n      if (triggerElm.value?.disabled) return\n      removeTabindex()\n      if (props.tabindex >= 0) {\n        resetTabindex(triggerElm.value)\n      }\n      clearTimeout(timeout.value)\n      timeout.value = window.setTimeout(\n        () => {\n          visible.value = false\n        },\n        ['click', 'contextmenu'].includes(props.trigger) ? 0 : props.hideTimeout\n      )\n    }\n\n    function removeTabindex() {\n      triggerElm.value?.setAttribute('tabindex', '-1')\n    }\n\n    function resetTabindex(ele) {\n      removeTabindex()\n      ele?.setAttribute('tabindex', '0')\n    }\n\n    function triggerElmFocus() {\n      triggerElm.value?.focus?.()\n    }\n\n    function triggerElmBlur() {\n      triggerElm.value?.blur?.()\n    }\n\n    const dropdownSize = useSize()\n\n    function commandHandler(...args) {\n      emit('command', ...args)\n    }\n\n    provide('elDropdown', {\n      instance: _instance,\n      dropdownSize,\n      visible,\n      handleClick,\n      commandHandler,\n      show,\n      hide,\n      trigger: computed(() => props.trigger),\n      hideOnClick: computed(() => props.hideOnClick),\n      triggerElm,\n    })\n\n    onMounted(() => {\n      if (!props.splitButton) {\n        on(triggerElm.value, 'focus', () => {\n          focusing.value = true\n        })\n        on(triggerElm.value, 'blur', () => {\n          focusing.value = false\n        })\n        on(triggerElm.value, 'click', () => {\n          focusing.value = false\n        })\n      }\n      if (props.trigger === 'hover') {\n        on(triggerElm.value, 'mouseenter', show)\n        on(triggerElm.value, 'mouseleave', hide)\n      } else if (props.trigger === 'click') {\n        on(triggerElm.value, 'click', handleClick)\n      } else if (props.trigger === 'contextmenu') {\n        on(triggerElm.value, 'contextmenu', (e) => {\n          e.preventDefault()\n          handleClick()\n        })\n      }\n\n      Object.assign(_instance, {\n        handleClick,\n        hide,\n        resetTabindex,\n      })\n    })\n\n    const handlerMainButtonClick = (event) => {\n      emit('click', event)\n      hide()\n    }\n\n    return {\n      visible,\n      scrollbar,\n      wrapStyle,\n      dropdownSize,\n      handlerMainButtonClick,\n      triggerVnode,\n    }\n  },\n})\n</script>\n"],"mappings":";;EACOA,KAAA,EAAM;AAAA;;;;;;;;sBAAXC,kBAAA,QAAAC,UAAA,GACEC,WAAA,CAAAC,oBAAA;IACEC,GAAA,EAAI;IACIC,OAAA,EAASC,IAAA,CAAAD,OAAA;4DAAAC,IAAA,CAAAD,OAAA,GAAAE,MAAA;IAChBC,SAAA,EAAWF,IAAA,CAAAE,SAAA;IACX,uBAAqB;IACrBC,MAAA,EAAQH,IAAA,CAAAG,MAAA;IACTC,IAAA;IACC,eAAa;IACbC,OAAA,GAAUL,IAAA,CAAAK,OAAA;IACX,gBAAa;IACb;IACAC,UAAA,EAAW;IACV,2BAAyB;IACzB,oBAAkB;EAAA;IAERC,OAAA,EAAAC,OAAA,CACT,OAAAZ,WAAA,CAAAa,uBAAA;MACEX,GAAA,EAAI;MACJY,GAAA,EAAI;MACH,cAAYV,IAAA,CAAAW,SAAA;MACb,cAAW;IAAA;uBAEX,OAAAC,UAAA,CAAAZ,IAAA,CAAAa,MAAA,c;;;IAGOR,OAAA,EAAAG,OAAA,CACT,OAAAM,kBAAA;MAAMrB,KAAA,EAAAsB,cAAA,EAAQf,IAAA,CAAAgB,YAAA,qBAAiChB,IAAA,CAAAgB,YAAA;SAChChB,IAAA,CAAAiB,WAAA,GAAbL,UAAA,CAAAZ,IAAA,CAAAa,MAAA;MAAAK,GAAA;IAAA,MAAAC,SAAA,IAEEC,WAAA,CAAAC,0BAAA;MAAAH,GAAA;IAAA;uBACE,OAAAtB,WAAA,CAAA0B,oBAAA;QACGC,IAAA,EAAMvB,IAAA,CAAAgB,YAAA;QACNQ,IAAA,EAAMxB,IAAA,CAAAwB,IAAA;QACNC,OAAA,EAAOzB,IAAA,CAAA0B;;yBAER,OAAAd,UAAA,CAAAZ,IAAA,CAAAa,MAAA,a;;0CAEFjB,WAAA,CAAA0B,oBAAA;QACGC,IAAA,EAAMvB,IAAA,CAAAgB,YAAA;QACNQ,IAAA,EAAMxB,IAAA,CAAAwB,IAAA;QACP/B,KAAA,EAAM;MAAA;yBAEN,OAAAG,WAAA,CAAA+B,kBAAA;UAASlC,KAAA,EAAM;QAAA;2BAAoB,OAAAG,WAAA,CAAcgC,qBAAA;UAAAC,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}