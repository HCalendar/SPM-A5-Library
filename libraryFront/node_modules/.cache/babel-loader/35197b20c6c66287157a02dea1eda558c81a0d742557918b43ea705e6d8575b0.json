{"ast":null,"code":"import { defineComponent, getCurrentInstance, inject, toRef, computed, reactive, onMounted, onBeforeUnmount } from 'vue';\nimport _Tooltip from '../../tooltip/index.mjs';\nimport '../../popper/index.mjs';\nimport { throwError } from '../../../utils/error.mjs';\nimport useMenu from './use-menu.mjs';\nimport { menuItemProps, menuItemEmits } from './menu-item.mjs';\nimport { Effect } from '../../popper/src/use-popper/defaults.mjs';\nconst COMPONENT_NAME = \"ElMenuItem\";\nvar script = defineComponent({\n  name: COMPONENT_NAME,\n  components: {\n    ElTooltip: _Tooltip\n  },\n  props: menuItemProps,\n  emits: menuItemEmits,\n  setup(props, {\n    emit\n  }) {\n    const instance = getCurrentInstance();\n    const rootMenu = inject(\"rootMenu\");\n    if (!rootMenu) throwError(COMPONENT_NAME, \"can not inject root menu\");\n    const {\n      parentMenu,\n      paddingStyle,\n      indexPath\n    } = useMenu(instance, toRef(props, \"index\"));\n    const subMenu = inject(`subMenu:${parentMenu.value.uid}`);\n    if (!subMenu) throwError(COMPONENT_NAME, \"can not inject sub menu\");\n    const active = computed(() => props.index === rootMenu.activeIndex);\n    const item = reactive({\n      index: props.index,\n      indexPath,\n      active\n    });\n    const handleClick = () => {\n      if (!props.disabled) {\n        rootMenu.handleMenuItemClick({\n          index: props.index,\n          indexPath: indexPath.value,\n          route: props.route\n        });\n        emit(\"click\", item);\n      }\n    };\n    onMounted(() => {\n      subMenu.addSubMenu(item);\n      rootMenu.addMenuItem(item);\n    });\n    onBeforeUnmount(() => {\n      subMenu.removeSubMenu(item);\n      rootMenu.removeMenuItem(item);\n    });\n    return {\n      Effect,\n      parentMenu,\n      rootMenu,\n      paddingStyle,\n      active,\n      handleClick\n    };\n  }\n});\nexport { script as default };","map":{"version":3,"names":["COMPONENT_NAME","script","defineComponent","name","components","ElTooltip","_Tooltip","props","menuItemProps","emits","menuItemEmits","setup","emit","instance","getCurrentInstance","rootMenu","inject","throwError","parentMenu","paddingStyle","indexPath","useMenu","toRef","subMenu","value","uid","active","computed","index","activeIndex","item","reactive","handleClick","disabled","handleMenuItemClick","route","onMounted","addSubMenu","addMenuItem","onBeforeUnmount","removeSubMenu","removeMenuItem","Effect"],"sources":["../../../../../../packages/components/menu/src/menu-item.vue"],"sourcesContent":["<template>\n  <li\n    class=\"el-menu-item\"\n    role=\"menuitem\"\n    tabindex=\"-1\"\n    :style=\"paddingStyle\"\n    :class=\"{\n      'is-active': active,\n      'is-disabled': disabled,\n    }\"\n    @click=\"handleClick\"\n  >\n    <el-tooltip\n      v-if=\"\n        parentMenu.type.name === 'ElMenu' &&\n        rootMenu.props.collapse &&\n        $slots.title\n      \"\n      :effect=\"Effect.DARK\"\n      placement=\"right\"\n    >\n      <template #content>\n        <slot name=\"title\" />\n      </template>\n      <div\n        :style=\"{\n          position: 'absolute',\n          left: 0,\n          top: 0,\n          height: '100%',\n          width: '100%',\n          display: 'inline-block',\n          boxSizing: 'border-box',\n          padding: '0 20px',\n        }\"\n      >\n        <slot />\n      </div>\n    </el-tooltip>\n    <template v-else>\n      <slot />\n      <slot name=\"title\" />\n    </template>\n  </li>\n</template>\n\n<script lang=\"ts\">\nimport {\n  defineComponent,\n  computed,\n  onMounted,\n  onBeforeUnmount,\n  inject,\n  getCurrentInstance,\n  toRef,\n  reactive,\n} from 'vue'\nimport ElTooltip from '@element-plus/components/tooltip'\nimport { Effect } from '@element-plus/components/popper'\nimport { throwError } from '@element-plus/utils/error'\nimport useMenu from './use-menu'\nimport { menuItemEmits, menuItemProps } from './menu-item'\n\nimport type { MenuItemRegistered, MenuProvider, SubMenuProvider } from './types'\n\nconst COMPONENT_NAME = 'ElMenuItem'\nexport default defineComponent({\n  name: COMPONENT_NAME,\n  components: {\n    ElTooltip,\n  },\n\n  props: menuItemProps,\n  emits: menuItemEmits,\n\n  setup(props, { emit }) {\n    const instance = getCurrentInstance()!\n    const rootMenu = inject<MenuProvider>('rootMenu')\n    if (!rootMenu) throwError(COMPONENT_NAME, 'can not inject root menu')\n\n    const { parentMenu, paddingStyle, indexPath } = useMenu(\n      instance,\n      toRef(props, 'index')\n    )\n\n    const subMenu = inject<SubMenuProvider>(`subMenu:${parentMenu.value.uid}`)\n    if (!subMenu) throwError(COMPONENT_NAME, 'can not inject sub menu')\n\n    const active = computed(() => props.index === rootMenu.activeIndex)\n    const item: MenuItemRegistered = reactive({\n      index: props.index,\n      indexPath,\n      active,\n    })\n\n    const handleClick = () => {\n      if (!props.disabled) {\n        rootMenu.handleMenuItemClick({\n          index: props.index,\n          indexPath: indexPath.value,\n          route: props.route,\n        })\n        emit('click', item)\n      }\n    }\n\n    onMounted(() => {\n      subMenu.addSubMenu(item)\n      rootMenu.addMenuItem(item)\n    })\n\n    onBeforeUnmount(() => {\n      subMenu.removeSubMenu(item)\n      rootMenu.removeMenuItem(item)\n    })\n\n    return {\n      Effect,\n      parentMenu,\n      rootMenu,\n      paddingStyle,\n      active,\n\n      handleClick,\n    }\n  },\n})\n</script>\n"],"mappings":";;;;;;;AAiEA,MAAMA,cAAA,GAAiB;AACvB,IAAAC,MAAA,GAAeC,eAAA,CAAgB;EAC7BC,IAAA,EAAMH,cAAA;EACNI,UAAA,EAAY;IAAAC,SAAA,EACVC;EAAA;EAGFC,KAAA,EAAOC,aAAA;EACPC,KAAA,EAAOC,aAAA;EAEPC,MAAMJ,KAAA,EAAO;IAAEK;EAAA,GAAQ;IACrB,MAAMC,QAAA,GAAWC,kBAAA;IACjB,MAAMC,QAAA,GAAWC,MAAA,CAAqB;IACtC,IAAI,CAACD,QAAA,EAAUE,UAAA,CAAWjB,cAAA,EAAgB;IAE1C,MAAM;MAAEkB,UAAA;MAAYC,YAAA;MAAcC;IAAA,IAAcC,OAAA,CAC9CR,QAAA,EACAS,KAAA,CAAMf,KAAA,EAAO;IAGf,MAAMgB,OAAA,GAAUP,MAAA,CAAwB,WAAWE,UAAA,CAAWM,KAAA,CAAMC,GAAA;IACpE,IAAI,CAACF,OAAA,EAASN,UAAA,CAAWjB,cAAA,EAAgB;IAEzC,MAAM0B,MAAA,GAASC,QAAA,CAAS,MAAMpB,KAAA,CAAMqB,KAAA,KAAUb,QAAA,CAASc,WAAA;IACvD,MAAMC,IAAA,GAA2BC,QAAA,CAAS;MACxCH,KAAA,EAAOrB,KAAA,CAAMqB,KAAA;MACbR,SAAA;MACAM;IAAA;IAGF,MAAMM,WAAA,GAAcA,CAAA,KAAM;MACxB,IAAI,CAACzB,KAAA,CAAM0B,QAAA,EAAU;QACnBlB,QAAA,CAASmB,mBAAA,CAAoB;UAC3BN,KAAA,EAAOrB,KAAA,CAAMqB,KAAA;UACbR,SAAA,EAAWA,SAAA,CAAUI,KAAA;UACrBW,KAAA,EAAO5B,KAAA,CAAM4B;QAAA;QAEfvB,IAAA,CAAK,SAASkB,IAAA;MAAA;IAAA;IAIlBM,SAAA,CAAU,MAAM;MACdb,OAAA,CAAQc,UAAA,CAAWP,IAAA;MACnBf,QAAA,CAASuB,WAAA,CAAYR,IAAA;IAAA;IAGvBS,eAAA,CAAgB,MAAM;MACpBhB,OAAA,CAAQiB,aAAA,CAAcV,IAAA;MACtBf,QAAA,CAAS0B,cAAA,CAAeX,IAAA;IAAA;IAG1B,OAAO;MACLY,MAAA;MACAxB,UAAA;MACAH,QAAA;MACAI,YAAA;MACAO,MAAA;MAEAM;IAAA;EAAA;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}