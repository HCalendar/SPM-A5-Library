{"ast":null,"code":"import { inject, computed } from 'vue';\nimport { throwError } from '../../../utils/error.mjs';\nfunction useMenu(instance, currentIndex) {\n  const rootMenu = inject(\"rootMenu\");\n  if (!rootMenu) throwError(\"useMenu\", \"can not inject root menu\");\n  const indexPath = computed(() => {\n    let parent = instance.parent;\n    const path = [currentIndex.value];\n    while (parent.type.name !== \"ElMenu\") {\n      if (parent.props.index) {\n        path.unshift(parent.props.index);\n      }\n      parent = parent.parent;\n    }\n    return path;\n  });\n  const parentMenu = computed(() => {\n    let parent = instance.parent;\n    while (parent && ![\"ElMenu\", \"ElSubMenu\"].includes(parent.type.name)) {\n      parent = parent.parent;\n    }\n    return parent;\n  });\n  const paddingStyle = computed(() => {\n    let parent = instance.parent;\n    if (rootMenu.props.mode !== \"vertical\") return {};\n    let padding = 20;\n    if (rootMenu.props.collapse) {\n      padding = 20;\n    } else {\n      while (parent && parent.type.name !== \"ElMenu\") {\n        if (parent.type.name === \"ElSubMenu\") {\n          padding += 20;\n        }\n        parent = parent.parent;\n      }\n    }\n    return {\n      paddingLeft: `${padding}px`\n    };\n  });\n  return {\n    parentMenu,\n    paddingStyle,\n    indexPath\n  };\n}\nexport { useMenu as default };","map":{"version":3,"names":["instance","currentIndex","rootMenu","inject","throwError","indexPath","computed","parent","path","value","type","name","props","index","unshift","parentMenu","includes","paddingStyle","mode","padding","collapse","paddingLeft"],"sources":["../../../../../../packages/components/menu/src/use-menu.ts"],"sourcesContent":["import { computed, inject } from 'vue'\nimport { throwError } from '@element-plus/utils/error'\n\nimport type { ComponentInternalInstance, Ref, CSSProperties } from 'vue'\nimport type { MenuProvider } from './types'\n\nexport default function useMenu(\n  instance: ComponentInternalInstance,\n  currentIndex: Ref<string>\n) {\n  const rootMenu = inject<MenuProvider>('rootMenu')\n  if (!rootMenu) throwError('useMenu', 'can not inject root menu')\n\n  const indexPath = computed(() => {\n    let parent = instance.parent!\n    const path = [currentIndex.value]\n    while (parent.type.name !== 'ElMenu') {\n      if (parent.props.index) {\n        path.unshift(parent.props.index as string)\n      }\n      parent = parent.parent!\n    }\n    return path\n  })\n\n  const parentMenu = computed(() => {\n    let parent = instance.parent\n    while (parent && !['ElMenu', 'ElSubMenu'].includes(parent.type.name!)) {\n      parent = parent.parent\n    }\n    return parent!\n  })\n  const paddingStyle = computed<CSSProperties>(() => {\n    let parent = instance.parent\n    if (rootMenu.props.mode !== 'vertical') return {}\n\n    let padding = 20\n\n    if (rootMenu.props.collapse) {\n      padding = 20\n    } else {\n      while (parent && parent.type.name !== 'ElMenu') {\n        if (parent.type.name === 'ElSubMenu') {\n          padding += 20\n        }\n        parent = parent.parent\n      }\n    }\n    return { paddingLeft: `${padding}px` }\n  })\n\n  return {\n    parentMenu,\n    paddingStyle,\n    indexPath,\n  }\n}\n"],"mappings":";;iBAOEA,QAAA,EACAC,YAAA,EACA;EACA,MAAMC,QAAA,GAAWC,MAAA,CAAqB;EACtC,IAAI,CAACD,QAAA,EAAUE,UAAA,CAAW,WAAW;EAErC,MAAMC,SAAA,GAAYC,QAAA,CAAS,MAAM;IAC/B,IAAIC,MAAA,GAASP,QAAA,CAASO,MAAA;IACtB,MAAMC,IAAA,GAAO,CAACP,YAAA,CAAaQ,KAAA;IAC3B,OAAOF,MAAA,CAAOG,IAAA,CAAKC,IAAA,KAAS,UAAU;MACpC,IAAIJ,MAAA,CAAOK,KAAA,CAAMC,KAAA,EAAO;QACtBL,IAAA,CAAKM,OAAA,CAAQP,MAAA,CAAOK,KAAA,CAAMC,KAAA;MAAA;MAE5BN,MAAA,GAASA,MAAA,CAAOA,MAAA;IAAA;IAElB,OAAOC,IAAA;EAAA;EAGT,MAAMO,UAAA,GAAaT,QAAA,CAAS,MAAM;IAChC,IAAIC,MAAA,GAASP,QAAA,CAASO,MAAA;IACtB,OAAOA,MAAA,IAAU,CAAC,CAAC,UAAU,aAAaS,QAAA,CAAST,MAAA,CAAOG,IAAA,CAAKC,IAAA,GAAQ;MACrEJ,MAAA,GAASA,MAAA,CAAOA,MAAA;IAAA;IAElB,OAAOA,MAAA;EAAA;EAET,MAAMU,YAAA,GAAeX,QAAA,CAAwB,MAAM;IACjD,IAAIC,MAAA,GAASP,QAAA,CAASO,MAAA;IACtB,IAAIL,QAAA,CAASU,KAAA,CAAMM,IAAA,KAAS,YAAY,OAAO;IAE/C,IAAIC,OAAA,GAAU;IAEd,IAAIjB,QAAA,CAASU,KAAA,CAAMQ,QAAA,EAAU;MAC3BD,OAAA,GAAU;IAAA,OACL;MACL,OAAOZ,MAAA,IAAUA,MAAA,CAAOG,IAAA,CAAKC,IAAA,KAAS,UAAU;QAC9C,IAAIJ,MAAA,CAAOG,IAAA,CAAKC,IAAA,KAAS,aAAa;UACpCQ,OAAA,IAAW;QAAA;QAEbZ,MAAA,GAASA,MAAA,CAAOA,MAAA;MAAA;IAAA;IAGpB,OAAO;MAAEc,WAAA,EAAa,GAAGF,OAAA;IAAA;EAAA;EAG3B,OAAO;IACLJ,UAAA;IACAE,YAAA;IACAZ;EAAA;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}