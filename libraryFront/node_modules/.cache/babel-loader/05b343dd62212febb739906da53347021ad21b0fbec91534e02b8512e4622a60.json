{"ast":null,"code":"import { EVENT_CODE, triggerEvent } from '../aria.mjs';\nimport SubMenu from './submenu.mjs';\nclass MenuItem {\n  constructor(domNode) {\n    this.domNode = domNode;\n    this.submenu = null;\n    this.submenu = null;\n    this.init();\n  }\n  init() {\n    this.domNode.setAttribute(\"tabindex\", \"0\");\n    const menuChild = this.domNode.querySelector(\".el-menu\");\n    if (menuChild) {\n      this.submenu = new SubMenu(this, menuChild);\n    }\n    this.addListeners();\n  }\n  addListeners() {\n    this.domNode.addEventListener(\"keydown\", event => {\n      let prevDef = false;\n      switch (event.code) {\n        case EVENT_CODE.down:\n          {\n            triggerEvent(event.currentTarget, \"mouseenter\");\n            this.submenu && this.submenu.gotoSubIndex(0);\n            prevDef = true;\n            break;\n          }\n        case EVENT_CODE.up:\n          {\n            triggerEvent(event.currentTarget, \"mouseenter\");\n            this.submenu && this.submenu.gotoSubIndex(this.submenu.subMenuItems.length - 1);\n            prevDef = true;\n            break;\n          }\n        case EVENT_CODE.tab:\n          {\n            triggerEvent(event.currentTarget, \"mouseleave\");\n            break;\n          }\n        case EVENT_CODE.enter:\n        case EVENT_CODE.space:\n          {\n            prevDef = true;\n            event.currentTarget.click();\n            break;\n          }\n      }\n      if (prevDef) {\n        event.preventDefault();\n      }\n    });\n  }\n}\nexport { MenuItem as default };","map":{"version":3,"names":["MenuItem","constructor","domNode","submenu","init","setAttribute","menuChild","querySelector","SubMenu","addListeners","addEventListener","event","prevDef","code","EVENT_CODE","down","triggerEvent","currentTarget","gotoSubIndex","up","subMenuItems","length","tab","enter","space","click","preventDefault"],"sources":["../../../../../packages/utils/menu/menu-item.ts"],"sourcesContent":["import { EVENT_CODE, triggerEvent } from '../aria'\nimport SubMenu from './submenu'\n\nclass MenuItem {\n  public submenu: SubMenu = null\n  constructor(public domNode: HTMLElement) {\n    this.submenu = null\n    this.init()\n  }\n\n  init(): void {\n    this.domNode.setAttribute('tabindex', '0')\n    const menuChild = this.domNode.querySelector('.el-menu')\n    if (menuChild) {\n      this.submenu = new SubMenu(this, menuChild)\n    }\n    this.addListeners()\n  }\n\n  addListeners(): void {\n    this.domNode.addEventListener('keydown', (event: KeyboardEvent) => {\n      let prevDef = false\n      switch (event.code) {\n        case EVENT_CODE.down: {\n          triggerEvent(event.currentTarget as HTMLElement, 'mouseenter')\n          this.submenu && this.submenu.gotoSubIndex(0)\n          prevDef = true\n          break\n        }\n        case EVENT_CODE.up: {\n          triggerEvent(event.currentTarget as HTMLElement, 'mouseenter')\n          this.submenu &&\n            this.submenu.gotoSubIndex(this.submenu.subMenuItems.length - 1)\n          prevDef = true\n          break\n        }\n        case EVENT_CODE.tab: {\n          triggerEvent(event.currentTarget as HTMLElement, 'mouseleave')\n          break\n        }\n        case EVENT_CODE.enter:\n        case EVENT_CODE.space: {\n          prevDef = true\n          ;(event.currentTarget as HTMLElement).click()\n          break\n        }\n      }\n      if (prevDef) {\n        event.preventDefault()\n      }\n    })\n  }\n}\n\nexport default MenuItem\n"],"mappings":";;AAGA,MAAAA,QAAA,CAAe;EAEbC,YAAmBC,OAAA,EAAsB;IAAtB,KAAAA,OAAA,GAAAA,OAAA;IADZ,KAAAC,OAAA,GAAmB;IAExB,KAAKA,OAAA,GAAU;IACf,KAAKC,IAAA;EAAA;EAGPA,KAAA,EAAa;IACX,KAAKF,OAAA,CAAQG,YAAA,CAAa,YAAY;IACtC,MAAMC,SAAA,GAAY,KAAKJ,OAAA,CAAQK,aAAA,CAAc;IAC7C,IAAID,SAAA,EAAW;MACb,KAAKH,OAAA,GAAU,IAAIK,OAAA,CAAQ,MAAMF,SAAA;IAAA;IAEnC,KAAKG,YAAA;EAAA;EAGPA,aAAA,EAAqB;IACnB,KAAKP,OAAA,CAAQQ,gBAAA,CAAiB,WAAYC,KAAA,IAAyB;MACjE,IAAIC,OAAA,GAAU;MACd,QAAQD,KAAA,CAAME,IAAA;QAAA,KACPC,UAAA,CAAWC,IAAA;UAAM;YACpBC,YAAA,CAAaL,KAAA,CAAMM,aAAA,EAA8B;YACjD,KAAKd,OAAA,IAAW,KAAKA,OAAA,CAAQe,YAAA,CAAa;YAC1CN,OAAA,GAAU;YACV;UAAA;QAAA,KAEGE,UAAA,CAAWK,EAAA;UAAI;YAClBH,YAAA,CAAaL,KAAA,CAAMM,aAAA,EAA8B;YACjD,KAAKd,OAAA,IACH,KAAKA,OAAA,CAAQe,YAAA,CAAa,KAAKf,OAAA,CAAQiB,YAAA,CAAaC,MAAA,GAAS;YAC/DT,OAAA,GAAU;YACV;UAAA;QAAA,KAEGE,UAAA,CAAWQ,GAAA;UAAK;YACnBN,YAAA,CAAaL,KAAA,CAAMM,aAAA,EAA8B;YACjD;UAAA;QAAA,KAEGH,UAAA,CAAWS,KAAA;QAAA,KACXT,UAAA,CAAWU,KAAA;UAAO;YACrBZ,OAAA,GAAU;YACRD,KAAA,CAAMM,aAAA,CAA8BQ,KAAA;YACtC;UAAA;MAAA;MAGJ,IAAIb,OAAA,EAAS;QACXD,KAAA,CAAMe,cAAA;MAAA;IAAA;EAAA;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}